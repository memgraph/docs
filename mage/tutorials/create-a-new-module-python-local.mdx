---
id: create-a-new-module-python
title: Developing a query module in Python
sidebar_label: Create a Python module
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';


### Prerequisites

- [Clone Github repository of Memgraph MAGE](https://github.com/memgraph/mage).
- Check which process you will use for [MAGE installation](https://memgraph.com/docs/mage/installation). **You still don't need to do it**. If you can install **MAGE** from source, it will be easier to develop module. Consider following as options:
    - You can download **MAGE** image from [DockerHub](https://hub.docker.com/r/memgraph/memgraph-mage/tags), but make sure it has **dev** tag.
    - By choosing to install **MAGE** yourself with **Docker**, Memgraph will come packed inside, so you **don't need to download Memgraph**, just clone **MAGE** Github repo.
    - If you decided to install **MAGE** from source, download **[Memgraph package](https://memgraph.com/product)**. **Memgraph package only exists
      for Linux based distro**. If you have Docker image of Memgraph, rather proceed with **MAGE from DockerHub installation** which is
      equipped for development. Building from source might not be compatible with Docker image of Memgraph.



## Developing a module
In this guide, we'll create a [random walk](https://en.wikipedia.org/wiki/Random_walk#On_graphs) algorithm.

**This part is same for all steps (DockerHub installation, Docker build, and build from source on Linux distro)**

Position yourself in the **MAGE repository** you cloned earlier. Specifically, go in the `python` sub-directory and
create a new file called `random_walk.py`. 

```
python
└── mage
    └── random_walk.py

```

For this part we will import `mgp`, Memgraph's internal data structure module. Among others, it
contains definitions for **Vertex** and **Edge** data structures.

:::tip 
Install the `mgp` Python module so your editor can use typing annotations
properly and suggest methods and classes it contains. You can install the module
by running `pip install mgp`.
:::

Here's the code for the random walk algorithm:

```python
import mgp
import random


@mgp.read_proc
def get_path(
    start: mgp.Vertex,
    length: int = 10,
) -> mgp.Record(path=mgp.Path):
    """Generates a random path of length `length` or less starting
    from the `start` vertex.

    :param mgp.Vertex start: The starting node of the walk.
    :param int length: The number of edges to traverse.
    :return: Random path.
    :rtype: mgp.Record(mgp.Path)
    """
    path = mgp.Path(start)
    vertex = start
    for _ in range(length):
        try:
            edge = random.choice(list(vertex.out_edges))
            path.expand(edge)
            vertex = edge.to_vertex
        except IndexError:
            break

    return mgp.Record(path=path)
```

The `get_path` is decorated with the `@mgp.read_proc` decorator, which tells
Memgraph it's a `read` procedure, meaning it won't change the graph. The path is
created from the `start` node, and edges are appended to it iteratively.


**Now we need to import this module in Memgraph and run it :star:**
## Importing, querying and testing a module

Now in order to import, query and test a module, hop to [following page](/mage/tutorials/run-a-query-module).
