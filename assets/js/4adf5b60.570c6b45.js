"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[86171],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>g});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),i=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):p(p({},t),e)),r},d=function(e){var t=i(e.components);return a.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=i(r),g=n,u=m["".concat(s,".").concat(g)]||m[g]||h[g]||o;return r?a.createElement(u,p(p({ref:t},d),{},{components:r})):a.createElement(u,p({ref:t},d))}));function g(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,p=new Array(o);p[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,p[1]=l;for(var i=2;i<o;i++)p[i]=r[i];return a.createElement.apply(null,p)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},91456:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>p,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>i});var a=r(87462),n=(r(67294),r(3905));const o={id:"export-python-graphs",title:"How to export data from Memgraph into Python graphs",sidebar_label:"Export data from Memgraph into Python graphs",slug:"/how-to-guides/export-python-graphs"},p=void 0,l={unversionedId:"how-to-guides/translators/export-python-graphs",id:"how-to-guides/translators/export-python-graphs",title:"How to export data from Memgraph into Python graphs",description:"GQLAlchemy holds translators that can export Memgraph graphs into Python graphs (NetworkX, PyG or DGL graphs). These translators create a Python graph instance from the graph stored in Memgraph.",source:"@site/gqlalchemy/how-to-guides/translators/export-python-graphs.md",sourceDirName:"how-to-guides/translators",slug:"/how-to-guides/export-python-graphs",permalink:"/docs/gqlalchemy/how-to-guides/export-python-graphs",draft:!1,editUrl:"https://github.com/memgraph/docs/tree/master/gqlalchemy/how-to-guides/translators/export-python-graphs.md",tags:[],version:"current",frontMatter:{id:"export-python-graphs",title:"How to export data from Memgraph into Python graphs",sidebar_label:"Export data from Memgraph into Python graphs",slug:"/how-to-guides/export-python-graphs"},sidebar:"gqlalchemy",previous:{title:"Import Python graphs into Memgraph",permalink:"/docs/gqlalchemy/how-to-guides/import-python-graphs"},next:{title:"Reference",permalink:"/docs/gqlalchemy/reference"}},s={},i=[{value:"General prerequisites",id:"general-prerequisites",level:2},{value:"Export data from Memgraph into NetworkX graph",id:"export-data-from-memgraph-into-networkx-graph",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Create and run a Python script",id:"create-and-run-a-python-script",level:3},{value:"Export data from Memgraph into PyG graph",id:"export-data-from-memgraph-into-pyg-graph",level:2},{value:"Prerequisites",id:"prerequisites-1",level:3},{value:"Create and run a Python script",id:"create-and-run-a-python-script-1",level:3},{value:"Export data from Memgraph into DGL graph",id:"export-data-from-memgraph-into-dgl-graph",level:2},{value:"Prerequisites",id:"prerequisites-2",level:3},{value:"Create and run a Python script",id:"create-and-run-a-python-script-2",level:3},{value:"Learn more",id:"learn-more",level:2}],d={toc:i};function h(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"GQLAlchemy holds translators that can export Memgraph graphs into Python graphs (",(0,n.kt)("a",{parentName:"p",href:"https://networkx.org/"},"NetworkX"),", ",(0,n.kt)("a",{parentName:"p",href:"https://pytorch-geometric.readthedocs.io/en/latest/"},"PyG")," or ",(0,n.kt)("a",{parentName:"p",href:"https://www.dgl.ai/"},"DGL")," graphs). These translators create a Python graph instance from the graph stored in Memgraph. "),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://github.com/memgraph/gqlalchemy/tree/main/tests/transformations/translators"},(0,n.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/source-examples-FB6E00?logo=github&style=for-the-badge",alt:"docs-source"})),"\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/memgraph/gqlalchemy/tree/main/gqlalchemy/transformations/translators"},(0,n.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/source-translators-FB6E00?logo=github&style=for-the-badge",alt:"docs-source"})),"\n",(0,n.kt)("a",{parentName:"p",href:"/docs/gqlalchemy/under-the-hood/python-graph-translators"},(0,n.kt)("img",{parentName:"a",src:"https://img.shields.io/static/v1?label=Related&message=Under%20the%20hood&color=orange&style=for-the-badge",alt:"Related - Under the\nhood"}))),(0,n.kt)("p",null,"In this guide you will learn how to:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#export-data-from-memgraph-into-networkx-graph"},(0,n.kt)("strong",{parentName:"a"},"Export data from Memgraph into NetworkX graph"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#import-pyg-graph-into-memgraph"},(0,n.kt)("strong",{parentName:"a"},"Export data from Memgraph into PyG graph"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#import-dgl-graph-into-memgraph"},(0,n.kt)("strong",{parentName:"a"},"Export data from Memgraph into DGL graph")))),(0,n.kt)("h2",{id:"general-prerequisites"},"General prerequisites"),(0,n.kt)("p",null,"You need a running ",(0,n.kt)("strong",{parentName:"p"},"Memgraph Platform instance"),", which includes both the MAGE library and Memgraph Lab, a visual interface. To run the image, open a command-line interpreter and run the following Docker command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"docker run -it -p 7687:7687 -p 7444:7444 -p 3000:3000 memgraph/memgraph-platform:latest\n")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"To export data from Memgraph, you first have to ",(0,n.kt)("b",null,"create a graph in Memgraph"),". To do that, expand this section and run the given Python script."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'from gqlalchemy import Memgraph\n\nmemgraph = Memgraph()\nmemgraph.drop_database()\n\nqueries = []\nqueries.append(f"CREATE (m:Node {{id: 1, num: 80, edem: 30, lst: [2, 3, 3, 2]}})")\nqueries.append(f"CREATE (m:Node {{id: 2, num: 91, edem: 32, lst: [2, 2, 3, 3]}})")\nqueries.append(\n    f"CREATE (m:Node {{id: 3, num: 100, edem: 34, lst: [3, 2, 2, 3, 4, 4]}})"\n)\nqueries.append(f"CREATE (m:Node {{id: 4, num: 12, edem: 34, lst: [2, 2, 2, 3, 5, 5]}})")\nqueries.append(\n    f"MATCH (n:Node {{id: 1}}), (m:Node {{id: 2}}) CREATE (n)-[r:CONNECTION {{edge_id: 1, edge_num: 99, edge_edem: 12, edge_lst: [0, 1, 0, 1, 0, 1, 0, 1]}}]->(m)"\n)\nqueries.append(\n    f"MATCH (n:Node {{id: 2}}), (m:Node {{id: 3}}) CREATE (n)-[r:CONNECTION {{edge_id: 2, edge_num: 99, edge_edem: 12, edge_lst: [0, 1, 0, 1]}}]->(m)"\n)\nqueries.append(\n    f"MATCH (n:Node {{id: 3}}), (m:Node {{id: 4}}) CREATE (n)-[r:CONNECTION {{edge_id: 3, edge_num: 99, edge_edem: 12, edge_lst: [1, 0, 1, 0, 1, 0, 1]}}]->(m)"\n)\nqueries.append(\n    f"MATCH (n:Node {{id: 4}}), (m:Node {{id: 1}}) CREATE (n)-[r:CONNECTION {{edge_id: 4, edge_num: 99, edge_edem: 12, edge_lst: [0, 1, 0, 1]}}]->(m)"\n)\nqueries.append(\n    f"MATCH (n:Node {{id: 1}}), (m:Node {{id: 3}}) CREATE (n)-[r:CONNECTION {{edge_id: 5, edge_num: 99, edge_edem: 12, edge_lst: [0, 1, 0, 1]}}]->(m)"\n)\nqueries.append(\n    f"MATCH (n:Node {{id: 2}}), (m:Node {{id: 4}}) CREATE (n)-[r:CONNECTION {{edge_id: 6, edge_num: 99, edge_edem: 12, edge_lst: [0, 1, 0, 1, 0, 0]}}]->(m)"\n)\nqueries.append(\n    f"MATCH (n:Node {{id: 4}}), (m:Node {{id: 2}}) CREATE (n)-[r:CONNECTION {{edge_id: 7, edge_num: 99, edge_edem: 12, edge_lst: [1, 1, 0, 0, 1, 1, 0, 1]}}]->(m)"\n)\nqueries.append(\n    f"MATCH (n:Node {{id: 3}}), (m:Node {{id: 1}}) CREATE (n)-[r:CONNECTION {{edge_id: 8, edge_num: 99, edge_edem: 12, edge_lst: [0, 1, 0, 1]}}]->(m)"\n)\n\nfor query in queries:\n    memgraph.execute(query)\n'))),(0,n.kt)("h2",{id:"export-data-from-memgraph-into-networkx-graph"},"Export data from Memgraph into NetworkX graph"),(0,n.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,n.kt)("p",null,"Except for the ",(0,n.kt)("a",{parentName:"p",href:"#general-prerequisites"},(0,n.kt)("strong",{parentName:"a"},"general prerequisites")),", you also need to install ",(0,n.kt)("a",{parentName:"p",href:"https://pypi.org/project/networkx/"},(0,n.kt)("strong",{parentName:"a"},"NetworkX Python library")),"."),(0,n.kt)("h3",{id:"create-and-run-a-python-script"},"Create and run a Python script"),(0,n.kt)("p",null,"Create a new Python script ",(0,n.kt)("inlineCode",{parentName:"p"},"memgraph-to-nx.py"),", in the code editor of your choice, with the following code:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"from gqlalchemy.transformations.translators.nx_translator import NxTranslator\n\ntranslator = NxTranslator()\ngraph = translator.get_instance()\n\nprint(graph.number_of_edges())\nprint(graph.number_of_nodes())\n")),(0,n.kt)("p",null,"To run it, open a command-line interpreter and run the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"python3 memgraph-to-nx.py\n")),(0,n.kt)("p",null,"You will get the following output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"8\n4\n")),(0,n.kt)("p",null,"This means that the NetworkX graph has the correct number of nodes and edges. You can explore it more to see if it has all the required features."),(0,n.kt)("h2",{id:"export-data-from-memgraph-into-pyg-graph"},"Export data from Memgraph into PyG graph"),(0,n.kt)("h3",{id:"prerequisites-1"},"Prerequisites"),(0,n.kt)("p",null,"Except for the ",(0,n.kt)("a",{parentName:"p",href:"#general-prerequisites"},(0,n.kt)("strong",{parentName:"a"},"general prerequisites")),", you also need to install ",(0,n.kt)("a",{parentName:"p",href:"https://pytorch-geometric.readthedocs.io/en/latest/install/installation.html"},(0,n.kt)("strong",{parentName:"a"},"Pytorch Geometric Python library")),"."),(0,n.kt)("h3",{id:"create-and-run-a-python-script-1"},"Create and run a Python script"),(0,n.kt)("p",null,"Create a new Python script ",(0,n.kt)("inlineCode",{parentName:"p"},"memgraph-to-pyg.py"),", in the code editor of your choice, with the following code:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'from gqlalchemy.transformations.translators.pyg_translator import PyGTranslator\n\ntranslator = PyGTranslator()\ngraph = translator.get_instance()\n\nprint(len(graph.edge_types))\nprint(len(graph.node_types))\n\nsource_node_label, edge_type, dest_node_label = ("Node", "CONNECTION", "Node")\ncan_etype = (source_node_label, edge_type, dest_node_label)\nprint(graph[source_node_label].num_nodes)\nprint(graph[can_etype].num_edges)\n')),(0,n.kt)("p",null,"To run it, open a command-line interpreter and run the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"python3 memgraph-to-pyg.py\n")),(0,n.kt)("p",null,"You will get the following output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"1\n1\n4\n8\n")),(0,n.kt)("p",null,"This means that the PyG graph has the correct number of node and edge types, as well as correct total number of nodes and edges. You can explore it more to see if it has all the required features."),(0,n.kt)("h2",{id:"export-data-from-memgraph-into-dgl-graph"},"Export data from Memgraph into DGL graph"),(0,n.kt)("h3",{id:"prerequisites-2"},"Prerequisites"),(0,n.kt)("p",null,"Except for the ",(0,n.kt)("a",{parentName:"p",href:"#general-prerequisites"},(0,n.kt)("strong",{parentName:"a"},"general prerequisites")),", you also need to install ",(0,n.kt)("a",{parentName:"p",href:"https://www.dgl.ai/pages/start.html"},(0,n.kt)("strong",{parentName:"a"},"Deep Graph Library")),"."),(0,n.kt)("h3",{id:"create-and-run-a-python-script-2"},"Create and run a Python script"),(0,n.kt)("p",null,"Create a new Python script ",(0,n.kt)("inlineCode",{parentName:"p"},"memgraph-to-dgl.py"),", in the code editor of your choice, with the following code:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'from gqlalchemy.transformations.translators.dgl_translator import DGLTranslator\n\ntranslator = DGLTranslator()\ngraph = translator.get_instance()\n\nprint(len(graph.canonical_etypes))\nprint(len(graph.ntypes))\n\nsource_node_label, edge_type, dest_node_label = ("Node", "CONNECTION", "Node")\ncan_etype = (source_node_label, edge_type, dest_node_label)\nprint(graph[can_etype].number_of_nodes())\nprint(graph[can_etype].number_of_edges())\nprint(len(graph.nodes[source_node_label].data.keys()))\nprint(len(graph.edges[(source_node_label, edge_type, dest_node_label)].data.keys()))\n')),(0,n.kt)("p",null,"To run it, open a command-line interpreter and run the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"python3 memgraph-to-dgl.py\n")),(0,n.kt)("p",null,"You will get the following output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"1\n1\n4\n8\n3\n3\n")),(0,n.kt)("p",null,"This means that the DGL graph has the correct number of node and edge types, total number of nodes and edges, as well as node and edge features. You can explore it more to see if it has all the required features."),(0,n.kt)("h2",{id:"learn-more"},"Learn more"),(0,n.kt)("p",null,"Head over to the ",(0,n.kt)("a",{parentName:"p",href:"/gqlalchemy/under-the-hood/python-graph-translators"},(0,n.kt)("strong",{parentName:"a"},"Under the hood"))," section to read about implementation details. If you want to learn more about using NetworkX with Memgraph with interesting resources and courses, head over to the ",(0,n.kt)("a",{parentName:"p",href:"https://memgraph.com/memgraph-for-networkx?utm_source=docs&utm_medium=referral&utm_campaign=networkx_ppp&utm_term=docsgqla%2Bhowto&utm_content=textlink"},(0,n.kt)("strong",{parentName:"a"},"Memgraph for NetworkX developers"))," website. If you have any questions or want to connect with the Memgraph community, ",(0,n.kt)("a",{parentName:"p",href:"https://www.discord.gg/memgraph"},(0,n.kt)("strong",{parentName:"a"},"join our Discord server")),"."))}h.isMDXComponent=!0}}]);