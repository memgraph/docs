"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[75384],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return c}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),m=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=m(e.components);return a.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=m(n),c=r,h=u["".concat(p,".").concat(c)]||u[c]||s[c]||o;return n?a.createElement(h,i(i({ref:t},d),{},{components:n})):a.createElement(h,i({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var m=2;m<o;m++)i[m]=n[m];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},60937:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return m},contentTitle:function(){return d},metadata:function(){return s},toc:function(){return u},default:function(){return h}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=n(26396),l=n(58215),p=["components"],m={id:"installation",title:"How to install MAGE?",sidebar_label:"Installation"},d=void 0,s={unversionedId:"installation",id:"installation",isDocsHomePage:!1,title:"How to install MAGE?",description:"Prerequisites",source:"@site/mage/installation.md",sourceDirName:".",slug:"/installation",permalink:"/docs/mage/installation",editUrl:"https://github.com/memgraph/docs/tree/master/mage/installation.md",tags:[],version:"current",frontMatter:{id:"installation",title:"How to install MAGE?",sidebar_label:"Installation"},sidebar:"mage",previous:{title:"MAGE overview",permalink:"/docs/mage/"},next:{title:"Betweenness Centrality",permalink:"/docs/mage/algorithms/traditional-graph-analytics/betweenness-centrality-algorithm"}},u=[{value:"Prerequisites",id:"prerequisites",children:[],level:2},{value:"Installing with Docker Hub",id:"installing-with-docker-hub",children:[],level:2},{value:"Build Docker image from Github repository",id:"build-docker-image-from-github-repository",children:[],level:2},{value:"Developing MAGE with Docker",id:"developing-mage-with-docker",children:[{value:"1. Rebuild the whole MAGE image",id:"1-rebuild-the-whole-mage-image",children:[],level:3},{value:"2. Build inside the Docker container",id:"2-build-inside-the-docker-container",children:[],level:3}],level:2},{value:"Install MAGE on Linux",id:"install-mage-on-linux",children:[],level:2},{value:"Advanced configuration",id:"advanced-configuration",children:[{value:"1. Automatic setup of the <code>query_modules</code> directory and build",id:"1-automatic-setup-of-the-query_modules-directory-and-build",children:[],level:3},{value:"2. Set a different <code>query_modules</code> directory",id:"2-set-a-different-query_modules-directory",children:[],level:3}],level:2}],c={toc:u};function h(e){var t=e.components,n=(0,r.Z)(e,p);return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"To install MAGE through ",(0,o.kt)("strong",{parentName:"p"},"Docker")," or ",(0,o.kt)("strong",{parentName:"p"},"Docker Hub"),", you will only need\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/get-started/#download-and-install-docker"},"Docker"),".",(0,o.kt)("br",null),"\nTo install MAGE from ",(0,o.kt)("strong",{parentName:"p"},"source"),", you will need:\xa0 ",(0,o.kt)("strong",{parentName:"p"},"Linux based distro"),",\n",(0,o.kt)("strong",{parentName:"p"},"Memgraph package"),", ",(0,o.kt)("strong",{parentName:"p"},"Python3"),", ",(0,o.kt)("strong",{parentName:"p"},"Make"),", ",(0,o.kt)("strong",{parentName:"p"},"CMake"),", ",(0,o.kt)("strong",{parentName:"p"},"Clang"),", ",(0,o.kt)("strong",{parentName:"p"},"UUID"),", and\n",(0,o.kt)("strong",{parentName:"p"},"Rust"),"."),(0,o.kt)(i.Z,{groupId:"installation-method",defaultValue:"docker-hub",values:[{label:"Docker Hub",value:"docker-hub"},{label:"Docker build",value:"docker-build"},{label:"Build from source on Linux",value:"source"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"docker-hub",mdxType:"TabItem"},(0,o.kt)("h2",{id:"installing-with-docker-hub"},"Installing with Docker Hub"),(0,o.kt)("p",null,"MAGE has prepared a Docker image on ",(0,o.kt)("a",{parentName:"p",href:"https://hub.docker.com/r/memgraph/memgraph-mage"},(0,o.kt)("strong",{parentName:"a"},"Docker\nHub"))," \ud83d\udc33  ready to be\npulled from\n",(0,o.kt)("a",{parentName:"p",href:"https://hub.docker.com/r/memgraph/memgraph-mage"},"memgraph/memgraph-mage"),"."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1.")," This is the only command you will need to make it run in your\nenvironment:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -p 7687:7687 memgraph/memgraph-mage:latest\n")),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You can download a specific version of MAGE. For example, if you want to\ndownload version ",(0,o.kt)("inlineCode",{parentName:"p"},"0.1"),", you should run the following command:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -p 7687:7687 memgraph/memgraph-mage:0.1\n")),(0,o.kt)("p",{parentName:"div"},"You can also download a MAGE image equipped for development inside of Docker\ncontainers:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -p 7687:7687 memgraph/memgraph-mage:0.1-dev\n")),(0,o.kt)("p",{parentName:"div"},"By running this command, you will get an image with the following tools\ninstalled: Python3, Rust, Clang, Make, and CMake. This way, you can copy files\nto the container, build them inside and import query modules in Memgraph."),(0,o.kt)("p",{parentName:"div"},"If you want to develop your own query modules, be sure to check the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/memgraph/mage#developing-mage-with-docker"},"Development\nprocess for MAGE with\nDocker"),".")))),(0,o.kt)(l.Z,{value:"docker-build",mdxType:"TabItem"},(0,o.kt)("h2",{id:"build-docker-image-from-github-repository"},"Build Docker image from Github repository"),(0,o.kt)("p",null,"This way, you will create a Docker image directly from the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/memgraph/mage"},"MAGE Github\nrepository")," and won't have to pull it from\nDocker Hub. You can:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"download a ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/memgraph/mage/releases"},"specific release")," from\nthe MAGE repository or"),(0,o.kt)("li",{parentName:"ul"},"clone the ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/memgraph/mage"},"repository")," for the latest\nversion.")),(0,o.kt)("p",null,"If you downloaded a specific release, skip the first step."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1.")," Download the MAGE source code from\n",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://github.com/memgraph/mage"},"GitHub")),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/memgraph/mage.git && cd mage\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"2.")," Build the ",(0,o.kt)("strong",{parentName:"p"},"MAGE")," tagged Docker image with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker build -t memgraph-mage .\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"3.")," Start Memgraph-MAGE with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker run --rm -p 7687:7687 --name mage memgraph-mage\n")),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Now you can query Memgraph with any of the querying platforms like ",(0,o.kt)("a",{parentName:"p",href:"https://memgraph.com/product/lab"},"Memgraph\nLab")," or\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/memgraph/mgconsole"},"mgconsole"),"."),(0,o.kt)("p",{parentName:"div"},"If you made any changes while the ",(0,o.kt)("strong",{parentName:"p"},"MAGE")," Docker container was running, you\nwould need to stop the Docker container and rebuild the whole image. If you\ndon't want to repeat these steps each time, be sure to check the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/memgraph/mage#developing-mage-with-docker"},"Development\nprocess for MAGE with\nDocker"),"."))),(0,o.kt)("h2",{id:"developing-mage-with-docker"},"Developing MAGE with Docker"),(0,o.kt)("p",null,"When developing your query module, you need to load it inside Memgraph running\ninside the Docker container. You can do that by ",(0,o.kt)("a",{parentName:"p",href:"#1-rebuild-the-whole-mage-image"},"rebuilding the whole MAGE\nimage")," or by ",(0,o.kt)("a",{parentName:"p",href:"#2-build-inside-the-docker-container"},"building it inside the Docker\ncontainer"),"."),(0,o.kt)("h3",{id:"1-rebuild-the-whole-mage-image"},"1. Rebuild the whole MAGE image"),(0,o.kt)("p",null,"This command will trigger the rebuild of the whole Docker image. Make sure that\nyou have added Python requirements inside ",(0,o.kt)("inlineCode",{parentName:"p"},"python/requirements.txt")," file."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1.")," Firstly, do the build of the ",(0,o.kt)("strong",{parentName:"p"},"MAGE")," image:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"docker build -t memgraph-mage .\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"2.")," Now, start ",(0,o.kt)("inlineCode",{parentName:"p"},"memgraph-mage")," image with the following command and enjoy\n",(0,o.kt)("strong",{parentName:"p"},"your")," own ",(0,o.kt)("strong",{parentName:"p"},"MAGE"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"docker run --rm -p 7687:7687 --name mage memgraph-mage\n")),(0,o.kt)("h3",{id:"2-build-inside-the-docker-container"},"2. Build inside the Docker container"),(0,o.kt)("p",null,"You can build a ",(0,o.kt)("strong",{parentName:"p"},"MAGE")," Docker image equipped for development. ",(0,o.kt)("inlineCode",{parentName:"p"},"Rust"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Clang"),",\n",(0,o.kt)("inlineCode",{parentName:"p"},"Python3-pip"),", and everything else necessary for development will still be\ninside the running container. This means that you can copy the ",(0,o.kt)("strong",{parentName:"p"},"MAGE"),"\nrepository to the container and do the build inside the ",(0,o.kt)("inlineCode",{parentName:"p"},"mage")," container. There\nis no need to do the whole Docker image build again."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1.")," To create ",(0,o.kt)("inlineCode",{parentName:"p"},"dev")," ",(0,o.kt)("strong",{parentName:"p"},"MAGE")," image, run the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"docker build --target dev -t memgraph-mage:dev .\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"2.")," Then run the image with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"docker run --rm -p 7687:7687 --name mage memgraph-mage:dev\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"3.")," Next, copy the files inside the container and do the build:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"a)")," First, you need to copy the files to the container named ",(0,o.kt)("inlineCode",{parentName:"p"},"mage")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"docker cp . mage:/mage/\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"b)")," Then, you need to position yourself inside the container as root:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"docker exec -u root -it mage /bin/bash\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Note: If you have done the build locally, make sure to delete the directory ",(0,o.kt)("inlineCode",{parentName:"p"},"cpp/build"),"\nbecause you might be dealing with different ",(0,o.kt)("inlineCode",{parentName:"p"},"architectures")," or problems with\n",(0,o.kt)("inlineCode",{parentName:"p"},"CMakeCache.txt"),". To delete it, run:"),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("inlineCode",{parentName:"p"},"rm -rf cpp/build")))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"c)")," After that, run build and copy ",(0,o.kt)("inlineCode",{parentName:"p"},"mage/dist")," to\n",(0,o.kt)("inlineCode",{parentName:"p"},"/usr/lib/memgraph/query_modules"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"python3 setup build -p /usr/lib/memgraph/query_modules/\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"d)")," Everything should be ready, and you can run the following command to exit\nthe container:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"exit\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Note that query modules are loaded into Memgraph on startup, so if your instance\nwas already running, you would need to execute the following query inside one of\nthe ",(0,o.kt)("a",{parentName:"p",href:"https://memgraph.com/docs/memgraph/connect-to-memgraph"},"querying platforms"),"\nto load them: "),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("inlineCode",{parentName:"p"},"CALL mg.load_all();"))))),(0,o.kt)(l.Z,{value:"source",mdxType:"TabItem"},(0,o.kt)("h2",{id:"install-mage-on-linux"},"Install MAGE on Linux"),(0,o.kt)("p",null,"This step is only suitable for Linux users as you need to ",(0,o.kt)("a",{parentName:"p",href:"https://memgraph.com/download"},"download and install\na Linux based Memgraph package"),"."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You should not build MAGE from the source and import the modules into Memgraph\nrunning in a Docker container. You would need to build MAGE inside the same\ncontainer where Memgraph is running due to the possibility of different\narchitectures on your local machine and the Docker container. If you need to\nwork with Docker, we have prepared a Docker image equipped for local\ndevelopment. Make sure to check the ",(0,o.kt)("inlineCode",{parentName:"p"},"Docker build")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"Docker Hub")," tab for more\ninformation."))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1.")," Download the MAGE source code from\n",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://github.com/memgraph/mage"},"GitHub"))," and run the ",(0,o.kt)("inlineCode",{parentName:"p"},"setup")," script. It\nwill generate a ",(0,o.kt)("inlineCode",{parentName:"p"},"dist")," directory with all the needed files:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"python3 setup build\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"2.")," Copy the contents of the newly created ",(0,o.kt)("inlineCode",{parentName:"p"},"dist")," directory to\n",(0,o.kt)("inlineCode",{parentName:"p"},"/usr/lib/memgraph/query_modules"),":"),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If you want to be quicker, you can specify a path for setup script to copy the\nbuilt executables:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"python3 setup build -p /usr/lib/memgraph/query_modules\n")))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"3.")," Start Memgraph and enjoy ",(0,o.kt)("strong",{parentName:"p"},"MAGE"),"!"),(0,o.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Query modules are loaded into Memgraph on startup so if your instance was already running you will need to\nexecute the following query inside one of ",(0,o.kt)("a",{parentName:"p",href:"https://memgraph.com/docs/memgraph/connect-to-memgraph"},"querying platforms")," to load them:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre"},"CALL mg.load_all();\n")),(0,o.kt)("p",{parentName:"div"},"If your changes are not loaded, make sure to restart the instance by running\n",(0,o.kt)("inlineCode",{parentName:"p"},"systemctl stop memgraph")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"systemctl start memgraph"),"."),(0,o.kt)("p",{parentName:"div"},"If you want to find out more about loading query modules, visit ",(0,o.kt)("a",{parentName:"p",href:"/docs/mage/usage/loading-modules"},"this\nguide"),"."))),(0,o.kt)("h2",{id:"advanced-configuration"},"Advanced configuration"),(0,o.kt)("h3",{id:"1-automatic-setup-of-the-query_modules-directory-and-build"},"1. Automatic setup of the ",(0,o.kt)("inlineCode",{parentName:"h3"},"query_modules")," directory and build"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"setup")," script can change the default directory where Memgraph is looking\nfor query modules to the ",(0,o.kt)("inlineCode",{parentName:"p"},"mage/dist")," directory, and will run the ",(0,o.kt)("inlineCode",{parentName:"p"},"build")," command\nto prepare all ",(0,o.kt)("inlineCode",{parentName:"p"},"*.so")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"*.py")," files:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"python3 setup all\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If your changes are not loaded, make sure to restart the instance by\nrunning ",(0,o.kt)("inlineCode",{parentName:"p"},"systemctl stop memgraph")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"systemctl start memgraph"),"."))),(0,o.kt)("p",null,"Next time you change a module, just run the following command, since you have\nalready set ",(0,o.kt)("inlineCode",{parentName:"p"},"/mage/dist")," as the query modules directory:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"python3 setup build\n")),(0,o.kt)("h3",{id:"2-set-a-different-query_modules-directory"},"2. Set a different ",(0,o.kt)("inlineCode",{parentName:"h3"},"query_modules")," directory"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"setup")," script can set your local ",(0,o.kt)("inlineCode",{parentName:"p"},"mage/dist")," directory or ",(0,o.kt)("strong",{parentName:"p"},"any")," other\ndirectory as the ",(0,o.kt)("strong",{parentName:"p"},"default")," one in the Memgraph configuration file (flag\n",(0,o.kt)("inlineCode",{parentName:"p"},"--query-modules-directory")," defined in ",(0,o.kt)("inlineCode",{parentName:"p"},"/etc/memgraph/memgraph.conf"),").\nThere are a few options:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1.")," Set ",(0,o.kt)("inlineCode",{parentName:"p"},"<your_directory>")," as the ",(0,o.kt)("strong",{parentName:"p"},"default")," one:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"python3 setup modules_storage -p <your_directory>\n")),(0,o.kt)("p",null,"This way Memgraph will be looking for query modules inside ",(0,o.kt)("inlineCode",{parentName:"p"},"<your_directory>"),". "),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Don't forget to copy the aforementioned files from ",(0,o.kt)("inlineCode",{parentName:"p"},"mage/dist")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"<your_directory>"),"."))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"2.")," Set ",(0,o.kt)("inlineCode",{parentName:"p"},"/mage/dist")," as the ",(0,o.kt)("strong",{parentName:"p"},"default")," one:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"python3 setup modules_storage\n")),(0,o.kt)("p",null,"If the ",(0,o.kt)("strong",{parentName:"p"},"default")," directory is ",(0,o.kt)("inlineCode",{parentName:"p"},"mage/dist")," then you don't need to copy ",(0,o.kt)("inlineCode",{parentName:"p"},"*.so"),"\nand ",(0,o.kt)("inlineCode",{parentName:"p"},"*.py")," files from the ",(0,o.kt)("inlineCode",{parentName:"p"},"mage/dist")," directory\nto",(0,o.kt)("inlineCode",{parentName:"p"},"/usr/lib/memgraph/query_modules")," every time you run ",(0,o.kt)("inlineCode",{parentName:"p"},"build"),"."))))}h.isMDXComponent=!0},58215:function(e,t,n){var a=n(67294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},26396:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(87462),r=n(67294),o=n(72389),i=n(79443);var l=function(){var e=(0,r.useContext)(i.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},p=n(89521),m=n(86010),d="tabItem_1uMI";function s(e){var t,n,a,o=e.lazy,i=e.block,s=e.defaultValue,u=e.values,c=e.groupId,h=e.className,g=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),k=null!=u?u:g.map((function(e){var t=e.props;return{value:t.value,label:t.label}})),v=(0,p.lx)(k,(function(e,t){return e.value===t.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var N=null===s?s:null!=(t=null!=s?s:null==(n=g.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(a=g[0])?void 0:a.props.value;if(null!==N&&!k.some((function(e){return e.value===N})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+N+'" but none of its children has the corresponding value. Available values are: '+k.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var f=l(),y=f.tabGroupChoices,w=f.setTabGroupChoices,b=(0,r.useState)(N),M=b[0],C=b[1],x=[],E=(0,p.o5)().blockElementScrollPositionUntilNextRender;if(null!=c){var D=y[c];null!=D&&D!==M&&k.some((function(e){return e.value===D}))&&C(D)}var A=function(e){var t=e.currentTarget,n=x.indexOf(t),a=k[n].value;a!==M&&(E(t),C(a),null!=c&&w(c,a))},T=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=x.indexOf(e.currentTarget)+1;n=x[a]||x[0];break;case"ArrowLeft":var r=x.indexOf(e.currentTarget)-1;n=x[r]||x[x.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,m.Z)("tabs",{"tabs--block":i},h)},k.map((function(e){var t=e.value,n=e.label;return r.createElement("li",{role:"tab",tabIndex:M===t?0:-1,"aria-selected":M===t,className:(0,m.Z)("tabs__item",d,{"tabs__item--active":M===t}),key:t,ref:function(e){return x.push(e)},onKeyDown:T,onFocus:A,onClick:A},null!=n?n:t)}))),o?(0,r.cloneElement)(g.filter((function(e){return e.props.value===M}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},g.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==M})}))))}function u(e){var t=(0,o.Z)();return r.createElement(s,(0,a.Z)({key:String(t)},e))}},79443:function(e,t,n){var a=(0,n(67294).createContext)(void 0);t.Z=a}}]);