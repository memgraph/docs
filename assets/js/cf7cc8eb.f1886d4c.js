"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[60872],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var d=n.createContext({}),s=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=s(e.components);return n.createElement(d.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,d=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(a),m=i,E=c["".concat(d,".").concat(m)]||c[m]||p[m]||r;return a?n.createElement(E,o(o({ref:t},u),{},{components:a})):n.createElement(E,o({ref:t},u))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=c;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},63148:(e,t,a)=>{a.r(t),a.d(t,{Highlight:()=>m,assets:()=>p,contentTitle:()=>s,default:()=>N,frontMatter:()=>d,metadata:()=>u,toc:()=>c});var n=a(87462),i=(a(67294),a(3905)),r=a(74866),o=a(85162),l=a(83523);const d={id:"node-similarity",title:"node_similarity",sidebar_label:"node_similarity"},s=void 0,u={unversionedId:"query-modules/cpp/node-similarity",id:"query-modules/cpp/node-similarity",title:"node_similarity",description:"docs-source",source:"@site/mage/query-modules/cpp/node_similarity.md",sourceDirName:"query-modules/cpp",slug:"/query-modules/cpp/node-similarity",permalink:"/docs/mage/query-modules/cpp/node-similarity",draft:!1,editUrl:"https://github.com/memgraph/docs/tree/master/mage/query-modules/cpp/node_similarity.md",tags:[],version:"current",frontMatter:{id:"node-similarity",title:"node_similarity",sidebar_label:"node_similarity"},sidebar:"mage",previous:{title:"node2vec_online",permalink:"/docs/mage/query-modules/python/node2vec-online"},next:{title:"nxalg",permalink:"/docs/mage/query-modules/python/nxalg"}},p={},c=[{value:"Abstract",id:"abstract",level:2},{value:"Procedures",id:"procedures",level:2},{value:"<code>cosine()</code>",id:"cosine",level:3},{value:"Output:",id:"output",level:4},{value:"Usage:",id:"usage",level:4},{value:"<code>cosine_pairwise(src_nodes, dst_nodes)</code>",id:"cosine_pairwisesrc_nodes-dst_nodes",level:3},{value:"Input:",id:"input",level:4},{value:"Output:",id:"output-1",level:4},{value:"Usage:",id:"usage-1",level:4},{value:"<code>jaccard()</code>",id:"jaccard",level:3},{value:"Output:",id:"output-2",level:4},{value:"Usage:",id:"usage-2",level:4},{value:"<code>jaccard_pairwise(src_nodes, dst_nodes)</code>",id:"jaccard_pairwisesrc_nodes-dst_nodes",level:3},{value:"Input:",id:"input-1",level:4},{value:"Output:",id:"output-3",level:4},{value:"Usage:",id:"usage-3",level:4},{value:"<code>overlap()</code>",id:"overlap",level:3},{value:"Output:",id:"output-4",level:4},{value:"Usage:",id:"usage-4",level:4},{value:"<code>overlap_pairwise(node1, node2)</code>",id:"overlap_pairwisenode1-node2",level:3},{value:"Input:",id:"input-2",level:4},{value:"Output:",id:"output-5",level:4},{value:"Example - cosine pairwise similarity",id:"example---cosine-pairwise-similarity",level:2},{value:"Example - Jaccard pairwise similarity",id:"example---jaccard-pairwise-similarity",level:2},{value:"Example - overlap similarity",id:"example---overlap-similarity",level:2}],m=e=>{let{children:t,color:a}=e;return(0,i.kt)("span",{style:{backgroundColor:a,borderRadius:"2px",color:"#fff",padding:"0.2rem"}},t)},E={toc:c,Highlight:m};function N(e){let{components:t,...d}=e;return(0,i.kt)("wrapper",(0,n.Z)({},E,d,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/memgraph/mage/blob/main/cpp/node_similarity_module/node_similarity_module.cpp"},(0,i.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/source-node_similarity-FB6E00?logo=github&style=for-the-badge",alt:"docs-source"}))),(0,i.kt)("h2",{id:"abstract"},"Abstract"),(0,i.kt)("p",null,"If we're interested in how similar two nodes in a graph are, we'll want to get a numerical value that represents the ",(0,i.kt)("em",null,"node similarity")," between those two nodes. There are many node similarity measures and currently this module contains the following: "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"cosine similarity"),(0,i.kt)("li",{parentName:"ul"},"Jaccard similarity "),(0,i.kt)("li",{parentName:"ul"},"overlap similarity")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"The Jaccard similarity")," is computed using the following formula:"),(0,i.kt)("a",{href:"https://www.codecogs.com/eqnedit.php?latex=Jaccard(A,B)&space;=&space;\\frac{|A&space;\\cap&space;B|}&space;{|A|&space;&plus;&space;|B|&space;-&space;|A&space;\\cap&space;B|}",target:"_blank"},(0,i.kt)("img",{src:"https://latex.codecogs.com/gif.latex?Jaccard(A,B)&space;=&space;\\frac{|A&space;\\cap&space;B|}&space;{|A|&space;&plus;&space;|B|&space;-&space;|A&space;\\cap&space;B|}",title:"Jaccard(A,B) = \\frac{|A \\cap B|} {|A| + |B| - |A \\cap B|}"})),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"The overlap similarity")," is computed using the following formula:"),(0,i.kt)("a",{href:"https://www.codecogs.com/eqnedit.php?latex=Overlap(A,B)&space;=&space;\\frac{|A&space;\\cap&space;B|}&space;{min(|A|,&space;|B|)}",target:"_blank"},(0,i.kt)("img",{src:"https://latex.codecogs.com/gif.latex?Overlap(A,B)&space;=&space;\\frac{|A&space;\\cap&space;B|}&space;{min(|A|,&space;|B|)}",title:"Overlap(A,B) = \\frac{|A \\cap B|} {min(|A|, |B|)}"})),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"The cosine similarity")," computes similarity between two nodes based on some property. This property should be a vector and it can be computed using the following formula:"),(0,i.kt)("img",{src:a(18259).Z}),(0,i.kt)("p",null,"Set A represents all outgoing neighbors of one node, set B represents all outgoing neighbors of the other node. In all the given formulas, the numerator is the cardinality of the intersection of set A and set B (in other words, the cardinality of the common neighbors set). The denominator differs but requires the cardinality of sets A and B in some way."),(0,i.kt)("p",null,"For each similarity measure, there are two functions, one that calculates similarity between all pairs of nodes and the other, pairwise function, that takes into account pairwise similarities between two set of nodes."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Trait"),(0,i.kt)("th",{parentName:"tr",align:null},"Value"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Module type")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)(m,{color:"#FB6E00",mdxType:"Highlight"},(0,i.kt)("strong",{parentName:"td"},"algorithm")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Implementation")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)(m,{color:"#FB6E00",mdxType:"Highlight"},(0,i.kt)("strong",{parentName:"td"},"C++")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Graph direction")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)(m,{color:"#FB6E00",mdxType:"Highlight"},(0,i.kt)("strong",{parentName:"td"},"directed")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Edge weights")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)(m,{color:"#FB6E00",mdxType:"Highlight"},(0,i.kt)("strong",{parentName:"td"},"unweighted")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Parallelism")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)(m,{color:"#FB6E00",mdxType:"Highlight"},(0,i.kt)("strong",{parentName:"td"},"sequential")))))),(0,i.kt)("h2",{id:"procedures"},"Procedures"),(0,i.kt)(l.ZP,{mdxType:"RunOnSubgraph"}),(0,i.kt)("h3",{id:"cosine"},(0,i.kt)("inlineCode",{parentName:"h3"},"cosine()")),(0,i.kt)("h4",{id:"output"},"Output:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node1: Vertex")," \u27a1 The first node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node2: Vertex")," \u27a1 The second node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"similarity: float")," \u27a1  The cosine similarity between the first and the second node.")),(0,i.kt)("h4",{id:"usage"},"Usage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},"CALL node_similarity.cosine() YIELD node1, node2, similarity\nRETURN node1, node2, similarity\n")),(0,i.kt)("h3",{id:"cosine_pairwisesrc_nodes-dst_nodes"},(0,i.kt)("inlineCode",{parentName:"h3"},"cosine_pairwise(src_nodes, dst_nodes)")),(0,i.kt)("h4",{id:"input"},"Input:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"src_nodes: List[Vertex]")," \u27a1 The first set of nodes."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dst_nodes: List[Vertex]]")," \u27a1 The second set of nodes."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"property: str")," \u27a1 The property based on which the cosine similarity will be calculated. If the property is not of the vector type, the error will be thrown.")),(0,i.kt)("h4",{id:"output-1"},"Output:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node1: Vertex")," \u27a1 The first node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node2: Vertex")," \u27a1 The second node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"similarity: float")," \u27a1  The cosine similarity between the first and the second node.")),(0,i.kt)("h4",{id:"usage-1"},"Usage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},'MATCH (m)\nWHERE m.id > 2\nWITH COLLECT(m) AS nodes1\nMATCH (n)\nWHERE n.id < 8\nWITH COLLECT(n) AS nodes2, nodes1\nCALL node_similarity.cosine_pairwise("score", nodes1, nodes2) YIELD node1, node2, similarity\nRETURN node1, node2, similarity\n')),(0,i.kt)("h3",{id:"jaccard"},(0,i.kt)("inlineCode",{parentName:"h3"},"jaccard()")),(0,i.kt)("h4",{id:"output-2"},"Output:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node1: Vertex")," \u27a1 The first node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node2: Vertex")," \u27a1 The second node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"similarity: float")," \u27a1  The Jaccard similarity between the first and the second node.")),(0,i.kt)("h4",{id:"usage-2"},"Usage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},"CALL node_similarity.jaccard() YIELD node1, node2, similarity\nRETURN node1, node2, similarity;\n")),(0,i.kt)("h3",{id:"jaccard_pairwisesrc_nodes-dst_nodes"},(0,i.kt)("inlineCode",{parentName:"h3"},"jaccard_pairwise(src_nodes, dst_nodes)")),(0,i.kt)("h4",{id:"input-1"},"Input:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"src_nodes: List[Vertex]")," \u27a1 The first set of nodes."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dst_nodes: List[Vertex]")," \u27a1 The second set of nodes.")),(0,i.kt)("h4",{id:"output-3"},"Output:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node1: Vertex")," \u27a1 The first node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node2: Vertex")," \u27a1 The second node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"similarity: float")," \u27a1  The Jaccard similarity between the first and the second node.")),(0,i.kt)("h4",{id:"usage-3"},"Usage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},"MATCH (m)\nWHERE m.id > 2\nWITH COLLECT(m) AS nodes1\nMATCH (n)\nWHERE n.id < 8\nWITH COLLECT(n) AS nodes2, nodes1\nCALL node_similarity.jaccard_pairwise(nodes1, nodes2) YIELD node1, node2, similarity\nRETURN node1, node2, similarity\n")),(0,i.kt)("h3",{id:"overlap"},(0,i.kt)("inlineCode",{parentName:"h3"},"overlap()")),(0,i.kt)("h4",{id:"output-4"},"Output:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node1: Vertex")," \u27a1 The first node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node2: Vertex")," \u27a1 The second node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"similarity: float")," \u27a1  The overlap similarity between the first and the second node.")),(0,i.kt)("h4",{id:"usage-4"},"Usage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},"CALL node_similarity.overlap() YIELD node1, node2, similarity\nRETURN node1, node2, similarity;\n")),(0,i.kt)("h3",{id:"overlap_pairwisenode1-node2"},(0,i.kt)("inlineCode",{parentName:"h3"},"overlap_pairwise(node1, node2)")),(0,i.kt)("h4",{id:"input-2"},"Input:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"src_nodes: List[Vertex]")," \u27a1 The first set of nodes."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dst_nodes: List[Vertex]")," \u27a1 The second set of nodes.")),(0,i.kt)("h4",{id:"output-5"},"Output:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node1: Vertex")," \u27a1 The first node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"node2: Vertex")," \u27a1 The second node."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"similarity: float")," \u27a1  The overlap similarity between the first and the second node.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},"MATCH (m)\nWHERE m.id > 2\nWITH COLLECT(m) AS nodes1\nMATCH (n)\nWHERE n.id < 8\nWITH COLLECT(n) AS nodes2, nodes1\nCALL node_similarity.overlap_pairwise(nodes1, nodes2) YIELD node1, node2, similarity\nRETURN node1, node2, similarity;\n")),(0,i.kt)("h2",{id:"example---cosine-pairwise-similarity"},"Example - cosine pairwise similarity"),(0,i.kt)(r.Z,{groupId:"example1",defaultValue:"visualization",values:[{label:"Step 1: Input graph",value:"visualization"},{label:"Step 2: Cypher load commands",value:"cypher"},{label:"Step 3: Running command",value:"run"},{label:"Step 4: Results",value:"result"}],mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"visualization",mdxType:"TabItem"},(0,i.kt)("img",{src:a(82225).Z})),(0,i.kt)(o.Z,{value:"cypher",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},"CREATE (b:Node {id: 0, score: [1.0, 1.0, 1.0]});\nCREATE (b:Node {id: 1, score: [1.0, 1.0, 1.0]});\nCREATE (b:Node {id: 2, score: [1.0, 1.0, 1.0]});\nCREATE (b:Node {id: 3, score: [1.0, 1.0, 0.0]});\nCREATE (b:Node {id: 4, score: [0.0, 1.0, 0.0]});\nCREATE (b:Node {id: 5, score: [1.0, 0.0, 1.0]});\nMERGE (a:Node {id: 0}) MERGE (b:Node {id: 2}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 0}) MERGE (b:Node {id: 3}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 0}) MERGE (b:Node {id: 4}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 0}) MERGE (b:Node {id: 5}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 1}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 1}) MERGE (b:Node {id: 1}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 1}) MERGE (b:Node {id: 2}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 2}) MERGE (b:Node {id: 1}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 2}) MERGE (b:Node {id: 4}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 2}) MERGE (b:Node {id: 5}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 4}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 4}) MERGE (b:Node {id: 1}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 5}) MERGE (b:Node {id: 2}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 5}) MERGE (b:Node {id: 3}) CREATE (a)-[:RELATION]->(b);\n"))),(0,i.kt)(o.Z,{value:"run",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},'MATCH (m)\nWHERE m.id < 3\nWITH COLLECT(m) AS nodes1\nMATCH (n)\nWHERE n.id > 2\nWITH COLLECT(n) AS nodes2, nodes1\nCALL node_similarity.cosine_pairwise("score", nodes1, nodes2) YIELD node1, node2, similarity AS cosine_similarity\nRETURN node1, node2, cosine_similarity;\n'))),(0,i.kt)(o.Z,{value:"result",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-plaintext"},"+-------------------+-------------------+-------------------+\n| node1             | node2             | cosine_similarity |\n+-------------------+-------------------+-------------------+\n| (:Node {id: 1})   | (:Node {id: 3})   | 0.816             |\n| (:Node {id: 2})   | (:Node {id: 4})   | 0.577             |\n| (:Node {id: 0})   | (:Node {id: 5})   | 0.816             |\n+-------------------+-------------------+-------------------+\n\n")))),(0,i.kt)("h2",{id:"example---jaccard-pairwise-similarity"},"Example - Jaccard pairwise similarity"),(0,i.kt)(r.Z,{groupId:"example2",defaultValue:"visualization",values:[{label:"Step 1: Input graph",value:"visualization"},{label:"Step 2: Cypher load commands",value:"cypher"},{label:"Step 3: Running command",value:"run"},{label:"Step 4: Results",value:"result"}],mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"visualization",mdxType:"TabItem"},(0,i.kt)("img",{src:a(82225).Z})),(0,i.kt)(o.Z,{value:"cypher",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},"MERGE (a:Node {id: 0}) MERGE (b:Node {id: 2}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 0}) MERGE (b:Node {id: 3}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 0}) MERGE (b:Node {id: 4}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 0}) MERGE (b:Node {id: 5}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 1}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 1}) MERGE (b:Node {id: 1}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 1}) MERGE (b:Node {id: 2}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 2}) MERGE (b:Node {id: 1}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 2}) MERGE (b:Node {id: 4}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 2}) MERGE (b:Node {id: 5}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 4}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 4}) MERGE (b:Node {id: 1}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 5}) MERGE (b:Node {id: 2}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 5}) MERGE (b:Node {id: 3}) CREATE (a)-[:RELATION]->(b);\n"))),(0,i.kt)(o.Z,{value:"run",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},"MATCH (m)\nWHERE m.id < 3\nWITH COLLECT(m) AS nodes1\nMATCH (n)\nWHERE n.id > 2\nWITH COLLECT(n) AS nodes2, nodes1\nCALL node_similarity.jaccard_pairwise(nodes1, nodes2) YIELD node1, node2, similarity AS jaccard_similarity\nRETURN node1, node2, jaccard_similarity;\n"))),(0,i.kt)(o.Z,{value:"result",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-plaintext"},"+-------------------+-------------------+--------------------+\n| node1             | node2             | jaccard_similarity |\n+-------------------+-------------------+--------------------+\n| (:Node {id: 1})   | (:Node {id: 3})   | 0.0                |\n| (:Node {id: 2})   | (:Node {id: 4})   | 0.25               |\n| (:Node {id: 0})   | (:Node {id: 5})   | 0.5                |\n+-------------------+-------------------+--------------------+\n\n")))),(0,i.kt)("h2",{id:"example---overlap-similarity"},"Example - overlap similarity"),(0,i.kt)(r.Z,{groupId:"example3",defaultValue:"visualization",values:[{label:"Step 1: Input graph",value:"visualization"},{label:"Step 2: Cypher load commands",value:"cypher"},{label:"Step 3: Running command",value:"run"},{label:"Step 4: Results",value:"result"}],mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"visualization",mdxType:"TabItem"},(0,i.kt)("img",{src:a(82225).Z})),(0,i.kt)(o.Z,{value:"cypher",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},"MERGE (a:Node {id: 0}) MERGE (b:Node {id: 2}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 0}) MERGE (b:Node {id: 3}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 0}) MERGE (b:Node {id: 4}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 0}) MERGE (b:Node {id: 5}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 1}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 1}) MERGE (b:Node {id: 1}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 1}) MERGE (b:Node {id: 2}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 2}) MERGE (b:Node {id: 1}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 2}) MERGE (b:Node {id: 4}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 2}) MERGE (b:Node {id: 5}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 4}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 4}) MERGE (b:Node {id: 1}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 5}) MERGE (b:Node {id: 2}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 5}) MERGE (b:Node {id: 3}) CREATE (a)-[:RELATION]->(b);\n"))),(0,i.kt)(o.Z,{value:"run",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cypher"},"MATCH (m)\nWHERE m.id < 3\nWITH COLLECT(m) AS nodes1\nMATCH (n)\nWHERE n.id > 2\nWITH COLLECT(n) AS nodes2, nodes1\nCALL node_similarity.overlap_pairwise(nodes1, nodes2) YIELD node1, node2, similarity AS overlap_similarity\nRETURN node1, node2, overlap_similarity;\n"))),(0,i.kt)(o.Z,{value:"result",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-plaintext"},"+-------------------+-------------------+--------------------+\n| node1             | node2             | overlap_similarity |\n+-------------------+-------------------+--------------------+\n| (:Node {id: 1})   | (:Node {id: 3})   | 0.0                |\n| (:Node {id: 2})   | (:Node {id: 4})   | 0.5                |\n| (:Node {id: 0})   | (:Node {id: 5})   | 1.0                |\n+-------------------+-------------------+--------------------+\n\n")))))}N.isMDXComponent=!0},83523:(e,t,a)=>{a.d(t,{ZP:()=>o});var n=a(87462),i=(a(67294),a(3905));const r={toc:[]};function o(e){let{components:t,...a}=e;return(0,i.kt)("wrapper",(0,n.Z)({},r,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"If you want to execute this algorithm on graph projections, subgraphs or portions\nof the graph, be sure to check out the guide on\n",(0,i.kt)("a",{parentName:"p",href:"/mage/how-to-guides/run-a-subgraph-module"},"How to run a MAGE module on subgraphs"),".")))}o.isMDXComponent=!0},85162:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(67294),i=a(86010);const r="tabItem_Ymn6";function o(e){let{children:t,hidden:a,className:o}=e;return n.createElement("div",{role:"tabpanel",className:(0,i.Z)(r,o),hidden:a},t)}},74866:(e,t,a)=>{a.d(t,{Z:()=>R});var n=a(87462),i=a(67294),r=a(86010),o=a(12466),l=a(16550),d=a(91980),s=a(67392),u=a(50012);function p(e){return function(e){return i.Children.map(e,(e=>{if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:i}}=e;return{value:t,label:a,attributes:n,default:i}}))}function c(e){const{values:t,children:a}=e;return(0,i.useMemo)((()=>{const e=t??p(a);return function(e){const t=(0,s.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function E(e){let{queryString:t=!1,groupId:a}=e;const n=(0,l.k6)(),r=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,d._X)(r),(0,i.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(n.location.search);t.set(r,e),n.replace({...n.location,search:t.toString()})}),[r,n])]}function N(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,r=c(e),[o,l]=(0,i.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:r}))),[d,s]=E({queryString:a,groupId:n}),[p,N]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,r]=(0,u.Nk)(a);return[n,(0,i.useCallback)((e=>{a&&r.set(e)}),[a,r])]}({groupId:n}),A=(()=>{const e=d??p;return m({value:e,tabValues:r})?e:null})();(0,i.useLayoutEffect)((()=>{A&&l(A)}),[A]);return{selectedValue:o,selectValue:(0,i.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),s(e),N(e)}),[s,N,r]),tabValues:r}}var A=a(72389);const b="tabList__CuJ",h="tabItem_LNqP";function y(e){let{className:t,block:a,selectedValue:l,selectValue:d,tabValues:s}=e;const u=[],{blockElementScrollPositionUntilNextRender:p}=(0,o.o5)(),c=e=>{const t=e.currentTarget,a=u.indexOf(t),n=s[a].value;n!==l&&(p(t),d(n))},m=e=>{var t;let a=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=u.indexOf(e.currentTarget)+1;a=u[t]??u[0];break}case"ArrowLeft":{const t=u.indexOf(e.currentTarget)-1;a=u[t]??u[u.length-1];break}}null==(t=a)||t.focus()};return i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":a},t)},s.map((e=>{let{value:t,label:a,attributes:o}=e;return i.createElement("li",(0,n.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>u.push(e),onKeyDown:m,onClick:c},o,{className:(0,r.Z)("tabs__item",h,null==o?void 0:o.className,{"tabs__item--active":l===t})}),a??t)})))}function T(e){let{lazy:t,children:a,selectedValue:n}=e;if(a=Array.isArray(a)?a:[a],t){const e=a.find((e=>e.props.value===n));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return i.createElement("div",{className:"margin-top--md"},a.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function k(e){const t=N(e);return i.createElement("div",{className:(0,r.Z)("tabs-container",b)},i.createElement(y,(0,n.Z)({},e,t)),i.createElement(T,(0,n.Z)({},e,t)))}function R(e){const t=(0,A.Z)();return i.createElement(k,(0,n.Z)({key:String(t)},e))}},18259:(e,t,a)=>{a.d(t,{Z:()=>n});const n="data:image/png;base64,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"},82225:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/node-similarity-1-5fd5e2699b4725c45d85f6d49b3d8114.png"}}]);