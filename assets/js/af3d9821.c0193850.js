"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[79736],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>d});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),m=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},s=function(e){var t=m(e.components);return n.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),c=m(a),d=r,h=c["".concat(p,".").concat(d)]||c[d]||u[d]||i;return a?n.createElement(h,o(o({ref:t},s),{},{components:a})):n.createElement(h,o({ref:t},s))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var m=2;m<i;m++)o[m]=a[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},72930:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>m});var n=a(87462),r=(a(67294),a(3905));const i={id:"cugraph",title:"Install MAGE \xd7 NVIDIA cuGraph",sidebar_label:"MAGE \xd7 NVIDIA cuGraph"},o=void 0,l={unversionedId:"installation/cugraph",id:"installation/cugraph",title:"Install MAGE \xd7 NVIDIA cuGraph",description:"Follow this guide to install Memgraph with [NVIDIA",source:"@site/mage/installation/cugraph.md",sourceDirName:"installation",slug:"/installation/cugraph",permalink:"/docs/mage/installation/cugraph",draft:!1,editUrl:"https://github.com/memgraph/docs/tree/master/mage/installation/cugraph.md",tags:[],version:"current",frontMatter:{id:"cugraph",title:"Install MAGE \xd7 NVIDIA cuGraph",sidebar_label:"MAGE \xd7 NVIDIA cuGraph"},sidebar:"mage",previous:{title:"Build from source on Linux",permalink:"/docs/mage/installation/source"},next:{title:"Loading query modules",permalink:"/docs/mage/usage/loading-modules"}},p={},m=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Installing the Docker image from Docker Hub",id:"installing-the-docker-image-from-docker-hub",level:2},{value:"Building MAGE with NVIDIA cuGraph locally with Docker",id:"building-mage-with-nvidia-cugraph-locally-with-docker",level:2},{value:"Installing MAGE natively from the source",id:"installing-mage-natively-from-the-source",level:2}],s={toc:m};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Follow this guide to install Memgraph with ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/rapidsai/cugraph"},(0,r.kt)("strong",{parentName:"a"},"NVIDIA\ncuGraph"))," GPU-powered graph algorithms."),(0,r.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"To be able to run cuGraph analytics, make sure you have compatible\ninfrastructure first. The exact system requirements are available at the\n",(0,r.kt)("a",{parentName:"p",href:"https://rapids.ai/start.html#requirements"},(0,r.kt)("strong",{parentName:"a"},"NVIDIA RAPIDS site")),", and include\nan NVIDIA Pascal (or better) GPU and up-to-date CUDA & NVIDIA drivers.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Docker requirements \ud83d\udc33")),(0,r.kt)("p",null,"If running MAGE \xd7 NVIDIA cuGraph in Docker, the following applies:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Official ",(0,r.kt)("a",{parentName:"li",href:"https://www.nvidia.com/download/index.aspx"},(0,r.kt)("strong",{parentName:"a"},"NVIDIA driver"))," for\nyour operating system. "),(0,r.kt)("li",{parentName:"ul"},"To run on NVIDIA-powered GPUs, RAPIDS requires Docker CE v19.03+ and\n",(0,r.kt)("a",{parentName:"li",href:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html#docker"},(0,r.kt)("strong",{parentName:"a"},"nvidia-container-toolkit")),"\ninstalled."),(0,r.kt)("li",{parentName:"ul"},"Legacy Docker CE v17-18 users require the installation of the\n",(0,r.kt)("a",{parentName:"li",href:"https://github.com/NVIDIA/nvidia-docker/wiki/Installation-(version-2.0)"},(0,r.kt)("strong",{parentName:"a"},"nvidia-docker2")),"\npackage.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Local build requirements:")),(0,r.kt)("p",null,"If building MAGE \xd7 NVIDIA cuGraph locally, these requirements apply (tested on\nUbuntu):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Official ",(0,r.kt)("a",{parentName:"li",href:"https://www.nvidia.com/download/index.aspx"},(0,r.kt)("strong",{parentName:"a"},"NVIDIA driver"))," for\nyour operating system. "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://cmake.org/"},(0,r.kt)("strong",{parentName:"a"},"CMake"))," version above 3.20"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developer.nvidia.com/cuda-toolkit"},(0,r.kt)("strong",{parentName:"a"},"NVIDIA CUDA developer toolkit")),"\n\u2013 CUDA version 11.6"),(0,r.kt)("li",{parentName:"ul"},"System dependencies: ",(0,r.kt)("inlineCode",{parentName:"li"},"libblas-dev"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"liblapack-dev"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"libboost-all-dev")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developer.nvidia.com/nccl"},(0,r.kt)("strong",{parentName:"a"},"NVIDIA NCCL communications library")))),(0,r.kt)("h2",{id:"installing-the-docker-image-from-docker-hub"},"Installing the Docker image from Docker Hub"),(0,r.kt)("p",null,"The simplest way of starting Memgraph with cuGraph GPU analytics is to download\nthe image from Docker Hub. Just pull the image, and get it running with these\nsimple commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"docker run --rm --gpus all -p 7687:7687 -p 7444:7444 memgraph/memgraph-mage:1.3-cugraph-22.02-cuda-11.5\n")),(0,r.kt)("p",null,"Depending on your environment, different versions of MAGE/cuGraph/CUDA can be\ninstalled:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"docker run --gpus all -p 7687:7687 -p 7444:7444 memgraph/memgraph-mage:${MAGE_VERSION}-cugraph-${CUGRAPH_VERSION}-cuda-${CUDA_VERSION}\n")),(0,r.kt)("p",null,"To see the available versions, explore our Docker Hub organization and look for\nthe images tagged\n",(0,r.kt)("a",{parentName:"p",href:"https://hub.docker.com/r/memgraph/memgraph-mage/tags"},(0,r.kt)("strong",{parentName:"a"},"memgraph-mage")),"."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The development image with cuGraph support is not available yet. If you want to\ndevelop cuGraph-powered query modules in Docker, do not hesitate to ",(0,r.kt)("a",{parentName:"p",href:"https://memgraph.com/community"},"contact\nus")," about it.")),(0,r.kt)("h2",{id:"building-mage-with-nvidia-cugraph-locally-with-docker"},"Building MAGE with NVIDIA cuGraph locally with Docker"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Download the MAGE source code from\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/memgraph/mage"},"GitHub"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/memgraph/mage.git && cd mage\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Build the ",(0,r.kt)("strong",{parentName:"p"},"MAGE \xd7 cuGraph"),"-tagged Docker image:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"docker build -f Dockerfile.cugraph -t memgraph-mage .\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Start Memgraph-MAGE with the following command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"docker run --rm --gpus all -p 7687:7687 -p 7444:7444 --name mage memgraph-mage\n")))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You can now query Memgraph from querying platforms such as ",(0,r.kt)("a",{parentName:"p",href:"https://memgraph.com/product/lab"},"Memgraph\nLab")," or\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/memgraph/mgconsole"},"mgconsole"),"."),(0,r.kt)("p",{parentName:"admonition"},"If you made any changes while the Docker container was running, you need to stop\nthe container and rebuild the image. For a workaround, check ",(0,r.kt)("a",{parentName:"p",href:"/docs/mage/installation/docker-build#developing-mage-with-docker"},"Development\nprocess for MAGE with\nDocker"),".")),(0,r.kt)("h2",{id:"installing-mage-natively-from-the-source"},"Installing MAGE natively from the source"),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Make sure you have installed all prerequisites and dependencies before building\nthe MAGE \xd7 NVIDIA cuGraph from source. ")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Download the MAGE source code from\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/memgraph/mage"},(0,r.kt)("strong",{parentName:"a"},"GitHub"))," and run the ",(0,r.kt)("inlineCode",{parentName:"p"},"setup")," script. It\nwill generate a ",(0,r.kt)("inlineCode",{parentName:"p"},"dist")," directory with all the needed files:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"python3 setup build --gpu\n")),(0,r.kt)("admonition",{parentName:"li",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"--gpu")," flag enables building the cuGraph dependencies and creating the\nshared library with cuGraph algorithms that are loaded into Memgraph."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Copy the contents of the newly created ",(0,r.kt)("inlineCode",{parentName:"p"},"dist")," directory to\n",(0,r.kt)("inlineCode",{parentName:"p"},"/usr/lib/memgraph/query_modules"),":"),(0,r.kt)("admonition",{parentName:"li",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"To speed the installation up, you can specify a path for the setup script to\ncopy the built executables:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"python3 setup build -p /usr/lib/memgraph/query_modules --gpu\n")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Start Memgraph and enjoy MAGE \xd7 cuGraph!"),(0,r.kt)("admonition",{parentName:"li",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"If your Memgraph instance was already running, execute the following query\ninside one of the ",(0,r.kt)("a",{parentName:"p",href:"https://memgraph.com/docs/memgraph/connect-to-memgraph"},(0,r.kt)("strong",{parentName:"a"},"querying\nplatforms"))," to reload\nthe modules:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre"},"CALL mg.load_all();\n")),(0,r.kt)("p",{parentName:"admonition"},"If the modules are still missing, restart the instance by running ",(0,r.kt)("inlineCode",{parentName:"p"},"systemctl\nstop memgraph")," and then ",(0,r.kt)("inlineCode",{parentName:"p"},"systemctl start memgraph"),"."),(0,r.kt)("p",{parentName:"admonition"},"For more about loading query modules, consult ",(0,r.kt)("a",{parentName:"p",href:"/docs/mage/usage/loading-modules"},(0,r.kt)("strong",{parentName:"a"},"this\nguide")),".")))))}u.isMDXComponent=!0}}]);