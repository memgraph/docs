"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[74442],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return u}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=a.createContext({}),p=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(d.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),c=p(n),u=r,h=c["".concat(d,".").concat(u)]||c[u]||m[u]||o;return n?a.createElement(h,i(i({ref:t},s),{},{components:n})):a.createElement(h,i({ref:t},s))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=c;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},33750:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return d},metadata:function(){return p},toc:function(){return s},default:function(){return c}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=["components"],l={id:"source",title:"Install MAGE on Linux from source",sidebar_label:"Build from source on Linux"},d=void 0,p={unversionedId:"installation/source",id:"installation/source",isDocsHomePage:!1,title:"Install MAGE on Linux from source",description:"This step is only suitable for Linux users as you need to [download and install",source:"@site/mage/installation/source.md",sourceDirName:"installation",slug:"/installation/source",permalink:"/docs/mage/installation/source",editUrl:"https://github.com/memgraph/docs/tree/master/mage/installation/source.md",tags:[],version:"current",frontMatter:{id:"source",title:"Install MAGE on Linux from source",sidebar_label:"Build from source on Linux"},sidebar:"mage",previous:{title:"Docker build",permalink:"/docs/mage/installation/docker-build"},next:{title:"Betweenness Centrality",permalink:"/docs/mage/algorithms/traditional-graph-analytics/betweenness-centrality-algorithm"}},s=[{value:"Installing MAGE",id:"installing-mage",children:[],level:2},{value:"Advanced configuration",id:"advanced-configuration",children:[{value:"1. Automatic setup of the <code>query_modules</code> directory and build",id:"1-automatic-setup-of-the-query_modules-directory-and-build",children:[],level:3},{value:"2. Set a different <code>query_modules</code> directory",id:"2-set-a-different-query_modules-directory",children:[],level:3}],level:2}],m={toc:s};function c(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This step is only suitable for Linux users as you need to ",(0,o.kt)("a",{parentName:"p",href:"https://memgraph.com/download"},"download and install\na Linux based Memgraph package"),"."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You should not build MAGE from the source and import the modules into Memgraph\nrunning in a Docker container. You would need to build MAGE inside the same\ncontainer where Memgraph is running due to the possibility of different\narchitectures on your local machine and the Docker container. If you need to\nwork with Docker, we have prepared a Docker image equipped for local\ndevelopment. Make sure to check the ",(0,o.kt)("a",{parentName:"p",href:"/docs/mage/installation/docker-build"},"Docker\nbuild")," or ",(0,o.kt)("a",{parentName:"p",href:"/docs/mage/installation/docker-hub"},"Docker\nHub")," guides."))),(0,o.kt)("h2",{id:"installing-mage"},"Installing MAGE"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1.")," Download the MAGE source code from\n",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://github.com/memgraph/mage"},"GitHub"))," and run the ",(0,o.kt)("inlineCode",{parentName:"p"},"setup")," script. It\nwill generate a ",(0,o.kt)("inlineCode",{parentName:"p"},"dist")," directory with all the needed files:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"python3 setup build\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"2.")," Copy the contents of the newly created ",(0,o.kt)("inlineCode",{parentName:"p"},"dist")," directory to\n",(0,o.kt)("inlineCode",{parentName:"p"},"/usr/lib/memgraph/query_modules"),":"),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If you want to be quicker, you can specify a path for setup script to copy the\nbuilt executables:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"python3 setup build -p /usr/lib/memgraph/query_modules\n")))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"3.")," Start Memgraph and enjoy ",(0,o.kt)("strong",{parentName:"p"},"MAGE"),"!"),(0,o.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Query modules are loaded into Memgraph on startup so if your instance")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"was already running you will need to execute the following query inside one of\n",(0,o.kt)("a",{parentName:"p",href:"https://memgraph.com/docs/memgraph/connect-to-memgraph"},"querying platforms")," to\nload them:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre"},"CALL mg.load_all();\n")),(0,o.kt)("p",{parentName:"div"},"If your changes are not loaded, make sure to restart the instance by running\n",(0,o.kt)("inlineCode",{parentName:"p"},"systemctl stop memgraph")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"systemctl start memgraph"),"."),(0,o.kt)("p",{parentName:"div"},"If you want to find out more about loading query modules, visit ",(0,o.kt)("a",{parentName:"p",href:"/docs/mage/usage/loading-modules"},"this\nguide"),"."))),(0,o.kt)("h2",{id:"advanced-configuration"},"Advanced configuration"),(0,o.kt)("h3",{id:"1-automatic-setup-of-the-query_modules-directory-and-build"},"1. Automatic setup of the ",(0,o.kt)("inlineCode",{parentName:"h3"},"query_modules")," directory and build"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"setup")," script can change the default directory where Memgraph is looking\nfor query modules to the ",(0,o.kt)("inlineCode",{parentName:"p"},"mage/dist")," directory, and will run the ",(0,o.kt)("inlineCode",{parentName:"p"},"build")," command\nto prepare all ",(0,o.kt)("inlineCode",{parentName:"p"},"*.so")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"*.py")," files:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"python3 setup all\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If your changes are not loaded, make sure to restart the instance by running\n",(0,o.kt)("inlineCode",{parentName:"p"},"systemctl stop memgraph")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"systemctl start memgraph"),"."))),(0,o.kt)("p",null,"Next time you change a module, just run the following command, since you have\nalready set ",(0,o.kt)("inlineCode",{parentName:"p"},"/mage/dist")," as the query modules directory:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"python3 setup build\n")),(0,o.kt)("h3",{id:"2-set-a-different-query_modules-directory"},"2. Set a different ",(0,o.kt)("inlineCode",{parentName:"h3"},"query_modules")," directory"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"setup")," script can set your local ",(0,o.kt)("inlineCode",{parentName:"p"},"mage/dist")," directory or ",(0,o.kt)("strong",{parentName:"p"},"any")," other\ndirectory as the ",(0,o.kt)("strong",{parentName:"p"},"default")," one in the Memgraph configuration file (flag\n",(0,o.kt)("inlineCode",{parentName:"p"},"--query-modules-directory")," defined in ",(0,o.kt)("inlineCode",{parentName:"p"},"/etc/memgraph/memgraph.conf"),"). There are\na few options:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1.")," Set ",(0,o.kt)("inlineCode",{parentName:"p"},"<your_directory>")," as the ",(0,o.kt)("strong",{parentName:"p"},"default")," one:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"python3 setup modules_storage -p <your_directory>\n")),(0,o.kt)("p",null,"This way Memgraph will be looking for query modules inside ",(0,o.kt)("inlineCode",{parentName:"p"},"<your_directory>"),"."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Don't forget to copy the aforementioned files from ",(0,o.kt)("inlineCode",{parentName:"p"},"mage/dist")," to\n",(0,o.kt)("inlineCode",{parentName:"p"},"<your_directory>"),"."))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"2.")," Set ",(0,o.kt)("inlineCode",{parentName:"p"},"/mage/dist")," as the ",(0,o.kt)("strong",{parentName:"p"},"default")," one:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"python3 setup modules_storage\n")),(0,o.kt)("p",null,"If the ",(0,o.kt)("strong",{parentName:"p"},"default")," directory is ",(0,o.kt)("inlineCode",{parentName:"p"},"mage/dist")," then you don't need to copy ",(0,o.kt)("inlineCode",{parentName:"p"},"*.so"),"\nand ",(0,o.kt)("inlineCode",{parentName:"p"},"*.py")," files from the ",(0,o.kt)("inlineCode",{parentName:"p"},"mage/dist")," directory\nto",(0,o.kt)("inlineCode",{parentName:"p"},"/usr/lib/memgraph/query_modules")," every time you run ",(0,o.kt)("inlineCode",{parentName:"p"},"build"),"."))}c.isMDXComponent=!0}}]);