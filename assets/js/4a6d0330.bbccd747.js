"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7066],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return c}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),u=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=u(n),c=r,g=m["".concat(p,".").concat(c)]||m[c]||s[c]||o;return n?a.createElement(g,i(i({ref:t},d),{},{components:n})):a.createElement(g,i({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var u=2;u<o;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},92959:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return u},contentTitle:function(){return d},metadata:function(){return s},toc:function(){return m},Highlight:function(){return c},default:function(){return k}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=n(55064),l=n(58215),p=["components"],u={id:"pagerank",title:"pagerank",sidebar_label:"pagerank"},d=void 0,s={unversionedId:"query-modules/python/pagerank",id:"query-modules/python/pagerank",isDocsHomePage:!1,title:"pagerank",description:"<span",source:"@site/mage/query-modules/python/pagerank.md",sourceDirName:"query-modules/python",slug:"/query-modules/python/pagerank",permalink:"/docs/mage/query-modules/python/pagerank",editUrl:"https://github.com/memgraph/docs/tree/master/mage/query-modules/python/pagerank.md",tags:[],version:"current",frontMatter:{id:"pagerank",title:"pagerank",sidebar_label:"pagerank"},sidebar:"mage",previous:{title:"nxalg",permalink:"/docs/mage/query-modules/python/nxalg"},next:{title:"set_cover",permalink:"/docs/mage/query-modules/python/set-cover"}},m=[{value:"Abstract",id:"abstract",children:[]},{value:"Procedures",id:"procedures",children:[{value:"<code>get(max_iterations, damping_factor, stop_epsilon)</code>",id:"getmax_iterations-damping_factor-stop_epsilon",children:[]}]},{value:"Example",id:"example",children:[]}],c=function(e){var t=e.children,n=e.color;return(0,o.kt)("span",{style:{backgroundColor:n,borderRadius:"2px",color:"#fff",padding:"0.2rem"}},t)},g={toc:m,Highlight:c};function k(e){var t=e.components,u=(0,r.Z)(e,p);return(0,o.kt)("wrapper",(0,a.Z)({},g,u,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/memgraph/mage/blob/main/cpp/pagerank_module/pagerank_module.cpp"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/source-pagerank-FB6E00?logo=github&style=for-the-badge",alt:"docs-source"}))),(0,o.kt)("h2",{id:"abstract"},"Abstract"),(0,o.kt)("p",null,"If we present nodes as pages and directed edges between them as links the ",(0,o.kt)("strong",{parentName:"p"},"PageRank")," algorithm outputs a probability distribution used to represent the likelihood that a person randomly clicking on links will arrive at any particular page."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"PageRank")," theory holds that an imaginary surfer who is randomly clicking on links will eventually stop clicking. The probability, at any step, that the person will continue randomly clicking on links is called a damping factor, otherwise next page is chosen randomly among all pages."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"PageRank")," is computed iteratively using following formula:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Rank(n, t + 1) = (1 - d) / number_of_nodes\n                + d * sum { Rank(in_neighbour_of_n, t) /\n                out_degree(in_neighbour_of_n)}\n")),(0,o.kt)("p",null,"Where Rank(n, t) is ",(0,o.kt)("strong",{parentName:"p"},"PageRank")," of node n at iteration t. In the end, ",(0,o.kt)("em",{parentName:"p"},"rank")," values are ",(0,o.kt)("strong",{parentName:"p"},"normalized")," to sum 1 to form a probability distribution."),(0,o.kt)("p",null,"The algorithm is implemented in such a way that all available ",(0,o.kt)("strong",{parentName:"p"},"threads")," are used to calculate PageRank, mostly for scalability purposes."),(0,o.kt)("p",null,"Default arguments are equal to default arguments in ",(0,o.kt)("a",{parentName:"p",href:"https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.link_analysis.pagerank_alg.pagerank.html"},"NetworkX")," PageRank implementation."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Trait"),(0,o.kt)("th",{parentName:"tr",align:null},"Value"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"Module type")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)(c,{color:"#FB6E00",mdxType:"Highlight"},(0,o.kt)("strong",{parentName:"td"},"algorithm")))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"Implementation")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)(c,{color:"#FB6E00",mdxType:"Highlight"},(0,o.kt)("strong",{parentName:"td"},"C++")))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"Graph direction")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)(c,{color:"#FB6E00",mdxType:"Highlight"},(0,o.kt)("strong",{parentName:"td"},"directed")))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"Edge weights")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)(c,{color:"#FB6E00",mdxType:"Highlight"},(0,o.kt)("strong",{parentName:"td"},"unweighted")))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"Parallelism")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)(c,{color:"#FB6E00",mdxType:"Highlight"},(0,o.kt)("strong",{parentName:"td"},"parallel")))))),(0,o.kt)("h2",{id:"procedures"},"Procedures"),(0,o.kt)("h3",{id:"getmax_iterations-damping_factor-stop_epsilon"},(0,o.kt)("inlineCode",{parentName:"h3"},"get(max_iterations, damping_factor, stop_epsilon)")),(0,o.kt)("h4",{id:"input"},"Input:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"max_iterations: int(100)")," \u27a1 Maximum number of iterations within PageRank algorithm."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"damping_factor: double(0.85)")," \u27a1 PageRanks damping factor. This is the  probability of continuing the random walk from a random node within the graph."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"stop_epsilon: double(1e-5)")," \u27a1 Value used to terminate the iterations of PageRank. If change from one iteration to another is lower than ",(0,o.kt)("em",{parentName:"li"},"stop_epsilon"),", execution is stopped.")),(0,o.kt)("h4",{id:"output"},"Output:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"node")," \u27a1 Node in graph, for which PageRank is calculated."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"rank")," \u27a1 Normalized ranking of a node. Expresses the probability that random surfer will finish in a certain node by a random walk.")),(0,o.kt)("h4",{id:"usage"},"Usage:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cypher"},"CALL pagerank.get()\nYIELD node, rank;\n")),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)(i.Z,{groupId:"example",defaultValue:"visualization",values:[{label:"Step 1: Input graph",value:"visualization"},{label:"Step 2: Cypher load commands",value:"cypher"},{label:"Step 3: Running command",value:"run"},{label:"Step 4: Results",value:"result"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"visualization",mdxType:"TabItem"},(0,o.kt)("img",{src:n(92754).Z})),(0,o.kt)(l.Z,{value:"cypher",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cypher"},"\nMERGE (a:Node {id: 1}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 2}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 3}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 4}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 5}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 6}) MERGE (b:Node {id: 0}) CREATE (a)-[:RELATION]->(b);\nMERGE (a:Node {id: 0}) MERGE (b:Node {id: 7}) CREATE (a)-[:RELATION]->(b);\n"))),(0,o.kt)(l.Z,{value:"run",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cypher"},"CALL pagerank.get()\nYIELD node, rank;\n"))),(0,o.kt)(l.Z,{value:"result",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-plaintext"},"+-----------------+-----------------+\n| node            | rank            |\n+-----------------+-----------------+\n| (:Node {id: 1}) | 0.0546896       |\n| (:Node {id: 0}) | 0.333607        |\n| (:Node {id: 2}) | 0.0546896       |\n| (:Node {id: 3}) | 0.0546896       |\n| (:Node {id: 4}) | 0.0546896       |\n| (:Node {id: 5}) | 0.0546896       |\n| (:Node {id: 6}) | 0.0546896       |\n| (:Node {id: 7}) | 0.338255        |\n+-----------------+-----------------+\n")))))}k.isMDXComponent=!0},58215:function(e,t,n){var a=n(67294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},55064:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(67294),r=n(79443);var o=function(){var e=(0,a.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},i=n(86010),l="tabItem_1uMI",p="tabItemActive_2DSg";var u=function(e){var t,n=e.lazy,r=e.block,u=e.defaultValue,d=e.values,s=e.groupId,m=e.className,c=a.Children.toArray(e.children),g=null!=d?d:c.map((function(e){return{value:e.props.value,label:e.props.label}})),k=null!=u?u:null==(t=c.find((function(e){return e.props.default})))?void 0:t.props.value,f=o(),h=f.tabGroupChoices,b=f.setTabGroupChoices,y=(0,a.useState)(k),N=y[0],v=y[1],E=[];if(null!=s){var x=h[s];null!=x&&x!==N&&g.some((function(e){return e.value===x}))&&v(x)}var R=function(e){var t=e.currentTarget,n=E.indexOf(t),a=g[n].value;v(a),null!=s&&(b(s,a),setTimeout((function(){var e,n,a,r,o,i,l,u;(e=t.getBoundingClientRect(),n=e.top,a=e.left,r=e.bottom,o=e.right,i=window,l=i.innerHeight,u=i.innerWidth,n>=0&&o<=u&&r<=l&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(p),setTimeout((function(){return t.classList.remove(p)}),2e3))}),150))},w=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=E.indexOf(e.target)+1;n=E[a]||E[0];break;case"ArrowLeft":var r=E.indexOf(e.target)-1;n=E[r]||E[E.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":r},m)},g.map((function(e){var t=e.value,n=e.label;return a.createElement("li",{role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,className:(0,i.Z)("tabs__item",l,{"tabs__item--active":N===t}),key:t,ref:function(e){return E.push(e)},onKeyDown:w,onFocus:R,onClick:R},null!=n?n:t)}))),n?(0,a.cloneElement)(c.filter((function(e){return e.props.value===N}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},c.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==N})}))))}},79443:function(e,t,n){var a=(0,n(67294).createContext)(void 0);t.Z=a},86010:function(e,t,n){function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:function(){return r}})},92754:function(e,t,n){t.Z=n.p+"assets/images/pagerank-1-c121945fa62faf58ea382180f0632f57.png"}}]);