"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[67260],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return c}});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),m=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=m(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=m(t),c=a,f=d["".concat(s,".").concat(c)]||d[c]||p[c]||o;return t?r.createElement(f,i(i({ref:n},u),{},{components:t})):r.createElement(f,i({ref:n},u))}));function c(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var m=2;m<o;m++)i[m]=t[m];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},97215:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return m},toc:function(){return u},default:function(){return d}});var r=t(87462),a=t(63366),o=(t(67294),t(3905)),i=["components"],l={id:"overview",title:"Transformation modules",sidebar_label:"Overview",slug:"/reference-guide/streams/transformation-modules"},s=void 0,m={unversionedId:"reference-guide/streams/transformation-modules/overview",id:"reference-guide/streams/transformation-modules/overview",isDocsHomePage:!1,title:"Transformation modules",description:"Memgraph supports user-defined transformations in C and Python",source:"@site/docs/reference-guide/streams/transformation-modules/overview.md",sourceDirName:"reference-guide/streams/transformation-modules",slug:"/reference-guide/streams/transformation-modules",permalink:"/memgraph/next/reference-guide/streams/transformation-modules",editUrl:"https://github.com/memgraph/docs/tree/master/docs/reference-guide/streams/transformation-modules/overview.md",version:"current",frontMatter:{id:"overview",title:"Transformation modules",sidebar_label:"Overview",slug:"/reference-guide/streams/transformation-modules"},sidebar:"memgraph",previous:{title:"Overview",permalink:"/memgraph/next/reference-guide/streams"},next:{title:"C API",permalink:"/memgraph/next/reference-guide/streams/transformation-modules/api/c-api"}},u=[{value:"Loading modules on startup",id:"loading-modules-on-startup",children:[]},{value:"Utility procedures for transformations",id:"utility-procedures-for-transformations",children:[]}],p={toc:u};function d(e){var n=e.components,t=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Memgraph supports user-defined transformations in ",(0,o.kt)("strong",{parentName:"p"},"C")," and ",(0,o.kt)("strong",{parentName:"p"},"Python"),"\nthat act on data received from a streaming engine. These transformations\nare grouped into modules called ",(0,o.kt)("strong",{parentName:"p"},"Transformation modules")," which can then\nbe loaded on startup or later on. A module consists of a transformation, a\nquery procedure, or both."),(0,o.kt)("p",null,"This section introduces transformation modules and their similarities\nwith query modules. Currently, we only support transformations for\nKafka streams but we are aiming to add support for other\nstreaming engines as well."),(0,o.kt)("h2",{id:"loading-modules-on-startup"},"Loading modules on startup"),(0,o.kt)("p",null,"Memgraph attempts to load the modules from all ",(0,o.kt)("inlineCode",{parentName:"p"},"*.so")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"*.py"),"\nfiles it finds in the default (",(0,o.kt)("inlineCode",{parentName:"p"},"/usr/lib/memgraph/query_modules"),") directory.\nThe ",(0,o.kt)("inlineCode",{parentName:"p"},"*.so")," modules are written using the C API and the ",(0,o.kt)("inlineCode",{parentName:"p"},"*.py")," modules are\nwritten using the Python API. Each file corresponds to one module. Names\nof these files will be mapped to module names.  For example, ",(0,o.kt)("inlineCode",{parentName:"p"},"hello.so"),"\nwill be mapped to the ",(0,o.kt)("inlineCode",{parentName:"p"},"hello")," module and a ",(0,o.kt)("inlineCode",{parentName:"p"},"py_hello.py")," script\nwill be mapped to the ",(0,o.kt)("inlineCode",{parentName:"p"},"py_hello.py")," module."),(0,o.kt)("p",null,"If you want to change the directory in which Memgraph searches for\ntransformation modules, just change or extend the ",(0,o.kt)("inlineCode",{parentName:"p"},"--query-modules-directory"),"\nflag in the main configuration file (",(0,o.kt)("inlineCode",{parentName:"p"},"/etc/memgraph/memgraph.conf"),") or supply\nit as a command-line parameter (e.g. when using Docker)."),(0,o.kt)("h2",{id:"utility-procedures-for-transformations"},"Utility procedures for transformations"),(0,o.kt)("p",null,"Query procedures that allow the users to gain more insight into other modules and\ntransformations are written under our utility ",(0,o.kt)("inlineCode",{parentName:"p"},"mg")," query module.\nFor transformations this module offers:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"mg.transformations() :: (name :: STRING)"),": Lists all transformations\nprocedures."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"mg.load(module_name :: STRING) :: ()"),": Loads or reloads the given module."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"mg.load_all() :: ()"),": Loads or reloads all modules.")),(0,o.kt)("p",null,"For example, invoking ",(0,o.kt)("inlineCode",{parentName:"p"},"mg.transformations()")," from openCypher like so:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cypher"},"CALL mg.transformations() YIELD *;\n")),(0,o.kt)("p",null,"might yield the following result:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-plaintext"},"+---------------------+\n| name                |\n+---------------------+\n| ...                 |\n| batch.transform     |\n| ...                 |\n+---------------------+\n")),(0,o.kt)("p",null,"In this case, we can see that Memgraph has already loaded the user-defined transformation\nof the module ",(0,o.kt)("inlineCode",{parentName:"p"},"batch"),"."),(0,o.kt)("p",null,"To load a module (named e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"hello"),") that wasn't loaded on startup (perhaps\nbecause it was added to Memgraph's query modules directory afterward), we\ncan simply invoke:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cypher"},'CALL mg.load("hello");\n')),(0,o.kt)("p",null,"If we wish to reload an existing module, say the ",(0,o.kt)("inlineCode",{parentName:"p"},"hello")," module above, we\nagain use the same procedure:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cypher"},'CALL mg.load("hello");\n')),(0,o.kt)("p",null,"Lastly, if we wish to reload all existing modules and load any newly added ones,\nwe can use:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cypher"},"CALL mg.load_all();\n")),(0,o.kt)("p",null,"For API references, you can also check:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"/memgraph/next/reference-guide/streams/transformation-modules/api/c-api"},"C API"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"/memgraph/next/reference-guide/streams/transformation-modules/api/python-api"},"Python API")))))}d.isMDXComponent=!0}}]);