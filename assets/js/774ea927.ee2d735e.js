"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[74442],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>c});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),d=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=d(e.components);return a.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=d(n),c=r,g=m["".concat(p,".").concat(c)]||m[c]||s[c]||o;return n?a.createElement(g,i(i({ref:t},u),{},{components:n})):a.createElement(g,i({ref:t},u))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var d=2;d<o;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},33750:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>s,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var a=n(87462),r=(n(67294),n(3905));const o={id:"source",title:"Install MAGE on Linux from source",sidebar_label:"Build from source on Linux"},i=void 0,l={unversionedId:"installation/source",id:"installation/source",title:"Install MAGE on Linux from source",description:"This step is only suitable for Linux users as you need to [download and install",source:"@site/mage/installation/source.md",sourceDirName:"installation",slug:"/installation/source",permalink:"/docs/mage/installation/source",draft:!1,editUrl:"https://github.com/memgraph/docs/tree/master/mage/installation/source.md",tags:[],version:"current",frontMatter:{id:"source",title:"Install MAGE on Linux from source",sidebar_label:"Build from source on Linux"},sidebar:"mage",previous:{title:"Docker build",permalink:"/docs/mage/installation/docker-build"},next:{title:"MAGE \xd7 NVIDIA cuGraph",permalink:"/docs/mage/installation/cugraph"}},p={},d=[{value:"Installing MAGE",id:"installing-mage",level:2},{value:"Advanced configuration",id:"advanced-configuration",level:2},{value:"1. Automatic setup of the <code>query_modules</code> directory and build",id:"1-automatic-setup-of-the-query_modules-directory-and-build",level:3},{value:"2. Set a different <code>query_modules</code> directory",id:"2-set-a-different-query_modules-directory",level:3}],u={toc:d};function s(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This step is only suitable for Linux users as you need to ",(0,r.kt)("a",{parentName:"p",href:"https://memgraph.com/download"},"download and install\na Linux based Memgraph package"),". To build from\nsource, you will need ",(0,r.kt)("strong",{parentName:"p"},"Python3"),", ",(0,r.kt)("strong",{parentName:"p"},"Make"),", ",(0,r.kt)("strong",{parentName:"p"},"CMake"),", ",(0,r.kt)("strong",{parentName:"p"},"Clang"),", ",(0,r.kt)("strong",{parentName:"p"},"UUID"),"\nand ",(0,r.kt)("strong",{parentName:"p"},"Rust"),"."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You should not build MAGE from source and import the modules into Memgraph\nrunning in a Docker container. You would need to build MAGE inside the same\ncontainer where Memgraph is running due to the possibility of different\narchitectures on your local machine and the Docker container. If you need to\nwork with Docker, we have prepared a Docker image equipped for local\ndevelopment. Make sure to check the ",(0,r.kt)("a",{parentName:"p",href:"/docs/mage/installation/docker-build"},"Docker\nbuild")," or ",(0,r.kt)("a",{parentName:"p",href:"/docs/mage/installation/docker-hub"},"Docker\nHub")," guides.")),(0,r.kt)("h2",{id:"installing-mage"},"Installing MAGE"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"1.")," Download the MAGE source code from\n",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/memgraph/mage"},"GitHub"))," and run the ",(0,r.kt)("inlineCode",{parentName:"p"},"setup")," script. It\nwill generate a ",(0,r.kt)("inlineCode",{parentName:"p"},"dist")," directory with all the needed files:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"python3 setup build\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Make sure you cloned  ",(0,r.kt)("inlineCode",{parentName:"p"},"mage")," github repository with:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"git clone --recurse-submodules https://github.com/memgraph/mage.git\n")),(0,r.kt)("p",{parentName:"admonition"},"if you didn't, you can run following command to update submodules:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"git submodule update --init --recursive\n"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"2.")," Copy the contents of the newly created ",(0,r.kt)("inlineCode",{parentName:"p"},"dist")," directory to\n",(0,r.kt)("inlineCode",{parentName:"p"},"/usr/lib/memgraph/query_modules"),":"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"If you want to be quicker, you can specify a path for setup script to copy the\nbuilt executables:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"python3 setup build -p /usr/lib/memgraph/query_modules\n"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"3.")," Start Memgraph and enjoy ",(0,r.kt)("strong",{parentName:"p"},"MAGE"),"!"),(0,r.kt)("admonition",{title:"Query modules are loaded into Memgraph on startup so if your instance",type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"was already running you will need to execute the following query inside one of\n",(0,r.kt)("a",{parentName:"p",href:"https://memgraph.com/docs/memgraph/connect-to-memgraph"},"querying platforms")," to\nload them:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre"},"CALL mg.load_all();\n")),(0,r.kt)("p",{parentName:"admonition"},"If your changes are not loaded, make sure to restart the instance by running\n",(0,r.kt)("inlineCode",{parentName:"p"},"systemctl stop memgraph")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"systemctl start memgraph"),"."),(0,r.kt)("p",{parentName:"admonition"},"If you want to find out more about loading query modules, visit ",(0,r.kt)("a",{parentName:"p",href:"/docs/mage/usage/loading-modules"},"this\nguide"),".")),(0,r.kt)("h2",{id:"advanced-configuration"},"Advanced configuration"),(0,r.kt)("h3",{id:"1-automatic-setup-of-the-query_modules-directory-and-build"},"1. Automatic setup of the ",(0,r.kt)("inlineCode",{parentName:"h3"},"query_modules")," directory and build"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"setup")," script can change the default directory where Memgraph is looking\nfor query modules to the ",(0,r.kt)("inlineCode",{parentName:"p"},"mage/dist")," directory, and will run the ",(0,r.kt)("inlineCode",{parentName:"p"},"build")," command\nto prepare all ",(0,r.kt)("inlineCode",{parentName:"p"},"*.so")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"*.py")," files:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"python3 setup all\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"If your changes are not loaded, make sure to restart the instance by running\n",(0,r.kt)("inlineCode",{parentName:"p"},"systemctl stop memgraph")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"systemctl start memgraph"),".")),(0,r.kt)("p",null,"Next time you change a module, just run the following command, since you have\nalready set ",(0,r.kt)("inlineCode",{parentName:"p"},"/mage/dist")," as the query modules directory:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"python3 setup build\n")),(0,r.kt)("h3",{id:"2-set-a-different-query_modules-directory"},"2. Set a different ",(0,r.kt)("inlineCode",{parentName:"h3"},"query_modules")," directory"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"setup")," script can set your local ",(0,r.kt)("inlineCode",{parentName:"p"},"mage/dist")," directory or ",(0,r.kt)("strong",{parentName:"p"},"any")," other\ndirectory as the ",(0,r.kt)("strong",{parentName:"p"},"default")," one in the Memgraph configuration file (flag\n",(0,r.kt)("inlineCode",{parentName:"p"},"--query-modules-directory")," defined in ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/memgraph/memgraph.conf"),"). There are\na few options:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"1.")," Set ",(0,r.kt)("inlineCode",{parentName:"p"},"<your_directory>")," as the ",(0,r.kt)("strong",{parentName:"p"},"default")," one:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"python3 setup modules_storage -p <your_directory>\n")),(0,r.kt)("p",null,"This way Memgraph will be looking for query modules inside ",(0,r.kt)("inlineCode",{parentName:"p"},"<your_directory>"),"."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Don't forget to copy the aforementioned files from ",(0,r.kt)("inlineCode",{parentName:"p"},"mage/dist")," to\n",(0,r.kt)("inlineCode",{parentName:"p"},"<your_directory>"),".")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"2.")," Set ",(0,r.kt)("inlineCode",{parentName:"p"},"/mage/dist")," as the ",(0,r.kt)("strong",{parentName:"p"},"default")," one:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"python3 setup modules_storage\n")),(0,r.kt)("p",null,"If the ",(0,r.kt)("strong",{parentName:"p"},"default")," directory is ",(0,r.kt)("inlineCode",{parentName:"p"},"mage/dist")," then you don't need to copy ",(0,r.kt)("inlineCode",{parentName:"p"},"*.so"),"\nand ",(0,r.kt)("inlineCode",{parentName:"p"},"*.py")," files from the ",(0,r.kt)("inlineCode",{parentName:"p"},"mage/dist")," directory\nto",(0,r.kt)("inlineCode",{parentName:"p"},"/usr/lib/memgraph/query_modules")," every time you run ",(0,r.kt)("inlineCode",{parentName:"p"},"build"),"."))}s.isMDXComponent=!0}}]);