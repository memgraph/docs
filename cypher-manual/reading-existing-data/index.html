<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="search" type="application/opensearchdescription+xml" title="Memgraph Docs" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Encode+Sans+Condensed:500,600">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400, 500,600">
<script src="https://docs.memgraph.com/js/load-analytics.js"></script>
<script src="https://kit.fontawesome.com/3a9f2eb5b9.js"></script><title data-react-helmet="true">Reading existing data | Memgraph Docs</title><meta data-react-helmet="true" property="og:url" content="https://docs.memgraph.com/cypher-manual/reading-existing-data"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-cypher-manual-current"><meta data-react-helmet="true" property="og:title" content="Reading existing data | Memgraph Docs"><meta data-react-helmet="true" name="description" content="The simplest usage of the language is to find data stored in the"><meta data-react-helmet="true" property="og:description" content="The simplest usage of the language is to find data stored in the"><link data-react-helmet="true" rel="shortcut icon" href="/img/social-logo-round-corners.png"><link data-react-helmet="true" rel="canonical" href="https://docs.memgraph.com/cypher-manual/reading-existing-data"><link data-react-helmet="true" rel="alternate" href="https://docs.memgraph.com/cypher-manual/reading-existing-data" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.memgraph.com/cypher-manual/reading-existing-data" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.e0c227af.css">
<link rel="preload" href="/assets/js/runtime~main.29229d00.js" as="script">
<link rel="preload" href="/assets/js/main.6ff5a3c8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/memgraph-logo-500x380.png" alt="Memgraph Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/memgraph-logo-500x380.png" alt="Memgraph Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Docs</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__item navbar__link" href="/memgraph/overview">Memgraph DB</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/memgraph/getting-started">Getting started</a></li><li><a class="dropdown__link" href="/memgraph/installation">Installation</a></li><li><a class="dropdown__link" href="/memgraph/import-data">Import data</a></li><li><a class="dropdown__link" href="/memgraph/connect-to-memgraph">Connect to Memgraph</a></li><li><a class="dropdown__link" href="/memgraph/reference-guide">Reference guide</a></li></ul></div><a class="navbar__item navbar__link" href="/memgraph-lab/">Memgraph Lab</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cypher-manual/">Cypher manual</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/cypher-manual/">Overview</a></li><li><a class="dropdown__link" href="/cypher-manual/functions">Functions</a></li><li><a class="dropdown__link" href="/cypher-manual/clauses">Clauses</a></li><li><a class="dropdown__link" href="/cypher-manual/other-features">Other features</a></li><li><a class="dropdown__link" href="/cypher-manual/differences">Differences</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__item navbar__link" href="/mage">MAGE</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/mage">Overview</a></li><li><a class="dropdown__link" href="/mage/installation">Installation</a></li><li><a class="dropdown__link" href="/mage/usage/calling-procedures">Usage</a></li><li><a class="dropdown__link" href="/mage/contributing">Contributing</a></li><li><a class="dropdown__link" href="/mage/getting-help">Getting help</a></li></ul></div><a class="navbar__item navbar__link" href="/help-center">Help Center</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/memgraph/overview">1.6.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/memgraph/next/overview">Unreleased ðŸš§</a></li><li><a class="dropdown__link" href="/memgraph/overview">1.6.1</a></li><li><a class="dropdown__link" href="/memgraph/1.6.0/overview">1.6.0</a></li><li><a class="dropdown__link" href="/memgraph/1.5.0/overview">1.5.0</a></li><li><a class="dropdown__link" href="/memgraph/1.4.0/overview">1.4.0</a></li><li><a class="dropdown__link" href="/memgraph/1.3.0/overview">1.3.0</a></li></ul></div><a href="https://github.com/memgraph" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cypher-manual/">Cypher manual overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Getting started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/cypher-manual/reading-existing-data">Reading existing data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cypher-manual/writing-new-data">Writing new data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cypher-manual/reading-and-writing">Reading and writing</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/cypher-manual/functions">Functions</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Clauses</a></li><li class="menu__list-item"><a class="menu__link" href="/cypher-manual/other-features">Other features</a></li><li class="menu__list-item"><a class="menu__link" href="/cypher-manual/differences">Differences</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Reading existing data</h1></header><p>The simplest usage of the language is to find data stored in the
database. For that purpose, the following clauses are offered:</p><ul><li><code>MATCH</code> which searches for patterns;</li><li><code>WHERE</code> for filtering the matched data and</li><li><code>RETURN</code> for defining what will be presented to the user in the result
set.</li><li><code>UNION</code> and <code>UNION ALL</code> for combining results from multiple queries.</li><li><code>UNWIND</code> for unwinding a list of values as individual rows.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="match"></a>MATCH<a class="hash-link" href="#match" title="Direct link to heading">#</a></h2><p>This clause is used to obtain data from Memgraph by matching it to a given
pattern. For example, to find each node in the database, you can use the
following query.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (node) RETURN node;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Finding connected nodes can be achieved by using the query:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (node1)-[connection]-(node2) RETURN node1, connection, node2;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In addition to general pattern matching, you can narrow the search down by
specifying node labels and properties. Similarly, edge types and properties
can also be specified. For example, finding each node labeled as <code>Person</code> and
with property <code>age</code> being 42, is done with the following query.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person {age: 42}) RETURN n;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>While their friends can be found with the following.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person {age: 42})-[:FriendOf]-(friend) RETURN friend;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>There are cases when a user needs to find data which is connected by
traversing a path of connections, but the user doesn&#x27;t know how many
connections need to be traversed. openCypher allows for designating patterns
with <em>variable path lengths</em>. Matching such a path is achieved by using the
<code>*</code> (<em>asterisk</em>) symbol inside the edge element of a pattern. For example,
traversing from <code>node1</code> to <code>node2</code> by following any number of connections in a
single direction can be achieved with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (node1)-[r*]-&gt;(node2) RETURN node1, r, node2;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If paths are very long, finding them could take a long time. To prevent that,
a user can provide the minimum and maximum length of the path. For example,
paths of length between 2 and 4 can be obtained with a query like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (node1)-[r*2..4]-&gt;(node2) RETURN node1, r, node2;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It is possible to name patterns in the query and return the resulting paths.
This is especially useful when matching variable length paths:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH path = ()-[r*2..4]-&gt;() RETURN path;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>More details on how <code>MATCH</code> works can be found
<a href="/cypher-manual/clauses/match">here</a>.</p><p>The <code>MATCH</code> clause can be modified by prepending the <code>OPTIONAL</code> keyword.
<code>OPTIONAL MATCH</code> clause behaves the same as a regular <code>MATCH</code>, but when it
fails to find the pattern, missing parts of the pattern will be filled with
<code>null</code> values. Examples can be found
<a href="/cypher-manual/clauses/optional-match">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="where"></a>WHERE<a class="hash-link" href="#where" title="Direct link to heading">#</a></h2><p>You have already seen that simple filtering can be achieved by using labels
and properties in <code>MATCH</code> patterns. When more complex filtering is desired,
you can use <code>WHERE</code> paired with <code>MATCH</code> or <code>OPTIONAL MATCH</code>. For example,
finding each person older than 20 is done with the this query.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) WHERE n.age &gt; 20 RETURN n;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Additional examples can be found
<a href="/cypher-manual/clauses/where">here</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="regular-expressions"></a>Regular expressions<a class="hash-link" href="#regular-expressions" title="Direct link to heading">#</a></h3><p>Inside <code>WHERE</code> clause, you can use regular expressions for text filtering. To
use a regular expression, you need to use the <code>=~</code> operator.</p><p>For example, finding all <code>Person</code> nodes which have a name ending with <code>son</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) WHERE n.name =~ &quot;.*son$&quot; RETURN n;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The regular expression syntax is based on the modified ECMAScript regular
expression grammar. The ECMAScript grammar can be found
<a href="http://ecma-international.org/ecma-262/5.1/#sec-15.10" target="_blank" rel="noopener noreferrer">here</a>, while the
modifications are described in <a href="https://en.cppreference.com/w/cpp/regex/ecmascript" target="_blank" rel="noopener noreferrer">this
document</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return"></a>RETURN<a class="hash-link" href="#return" title="Direct link to heading">#</a></h2><p>The <code>RETURN</code> clause defines which data should be included in the resulting
set. Basic usage was already shown in the examples for <code>MATCH</code> and <code>WHERE</code>
clauses. Another feature of <code>RETURN</code> is renaming the results using the <code>AS</code>
keyword.</p><p>Example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN n AS people;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>That query would display all nodes under the header named <code>people</code> instead of
<code>n</code>.</p><p>When you want to get everything that was matched, you can use the <code>*</code>
(<em>asterisk</em>) symbol.</p><p>This query:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (node1)-[connection]-(node2) RETURN *;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>is equivalent to:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (node1)-[connection]-(node2) RETURN node1, connection, node2;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>RETURN</code> can be followed by the <code>DISTINCT</code> operator, which will remove
duplicate results. For example, getting unique names of people can be achieved
with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN DISTINCT n.name;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Besides choosing what will be the result and how it will be named, the
<code>RETURN</code> clause can also be used to:</p><ul><li>limit results with <code>LIMIT</code> sub-clause;</li><li>skip results with <code>SKIP</code> sub-clause;</li><li>order results with <code>ORDER BY</code> sub-clause and</li><li>perform aggregations (such as <code>count</code>).</li></ul><p>More details on <code>RETURN</code> can be found
<a href="/cypher-manual/clauses/return">here</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="skip--limit"></a>SKIP &amp; LIMIT<a class="hash-link" href="#skip--limit" title="Direct link to heading">#</a></h3><p>These sub-clauses take a number of how many results to skip or limit.
For example, to get the first 3 results you can use this query.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN n LIMIT 3;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you want to get all the results after the first 3, you can use the
following.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN n SKIP 3;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>SKIP</code> and <code>LIMIT</code> can be combined. So for example, to get the 2nd result,
you can do:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN n SKIP 1 LIMIT 1;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="order-by"></a>ORDER BY<a class="hash-link" href="#order-by" title="Direct link to heading">#</a></h3><p>Since the patterns which are matched can come in any order, it is very useful
to be able to enforce some ordering among the results. In such cases, you can
use the <code>ORDER BY</code> sub-clause.</p><p>For example, the following query will get all <code>:Person</code> nodes and order them
by their names.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN n ORDER BY n.name;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>By default, ordering will be in the ascending order. To change the order to be
descending, you should append <code>DESC</code>.</p><p>For example, to order people by their name descending, you can use this query.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN n ORDER BY n.name DESC;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can also order by multiple variables. The results will be sorted by the
first variable listed. If the values are equal, the results are sorted by the
second variable, and so on.</p><p>Example. Ordering by first name descending and last name ascending.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN n ORDER BY n.name DESC, n.lastName;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that <code>ORDER BY</code> sees only the variable names as carried over by <code>RETURN</code>.
This means that the following will result in an error.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN old AS new ORDER BY old.name;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Instead, the <code>new</code> variable must be used:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n: Person) RETURN old AS new ORDER BY new.name;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>ORDER BY</code> sub-clause may come in handy with <code>SKIP</code> and/or <code>LIMIT</code>
sub-clauses. For example, to get the oldest person you can use the following.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN n ORDER BY n.age DESC LIMIT 1;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aggregating"></a>Aggregating<a class="hash-link" href="#aggregating" title="Direct link to heading">#</a></h3><p>openCypher has functions for aggregating data. Memgraph currently supports
the following aggregating functions.</p><ul><li><code>avg</code>, for calculating the average.</li><li><code>collect</code>, for collecting multiple values into a single list or map. If
given a single expression values are collected into a list. If given two
expressions, values are collected into a map where the first expression
denotes map keys (must be string values) and the second expression denotes
map values.</li><li><code>count</code>, for counting the resulting values.</li><li><code>max</code>, for calculating the maximum result.</li><li><code>min</code>, for calculating the minimum result.</li><li><code>sum</code>, for getting the sum of numeric results.</li></ul><p>Example, calculating the average age:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN avg(n.age) AS averageAge;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Collecting items into a list:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN collect(n.name) AS list_of_names;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Collecting items into a map:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (n :Person) RETURN collect(n.name, n.age) AS map_name_to_age;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Click
<a href="https://neo4j.com/docs/developer-manual/current/cypher/functions/aggregating/" target="_blank" rel="noopener noreferrer">here</a>
for additional details on how aggregations work.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="union-and-union-all"></a>UNION and UNION ALL<a class="hash-link" href="#union-and-union-all" title="Direct link to heading">#</a></h2><p>openCypher supports combining results from multiple queries into a single result
set. That result will contain rows that belong to queries in the union
respecting the union type.</p><p>Using <code>UNION</code> will contain only distinct rows while <code>UNION ALL</code> will keep all
rows from all given queries.</p><p>Restrictions when using <code>UNION</code> or <code>UNION ALL</code>:</p><ul><li>The number and the names of columns returned by queries must be the same
for all of them.</li><li>There can be only one union type between single queries, i.e. a query can&#x27;t
contain both <code>UNION</code> and <code>UNION ALL</code>.</li></ul><p>Example, get distinct names that are shared between persons and movies:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH(n: Person) RETURN n.name AS name UNION MATCH(n: Movie) RETURN n.name AS name;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Example, get all names that are shared between persons and movies (including duplicates):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH(n: Person) RETURN n.name AS name UNION ALL MATCH(n: Movie) RETURN n.name AS name;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="unwind"></a>UNWIND<a class="hash-link" href="#unwind" title="Direct link to heading">#</a></h2><p>The <code>UNWIND</code> clause is used to unwind a list of values as individual rows.</p><p>Example, produce rows out of a single list.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">UNWIND [1,2,3] AS listElement RETURN listElement;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>More examples can be found <a href="/cypher-manual/clauses/unwind">here</a>.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/memgraph/docs/tree/master/cypher-manual/getting-started/reading-existing-data.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cypher-manual/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Cypher manual overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cypher-manual/writing-new-data"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Writing new data Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#match" class="table-of-contents__link">MATCH</a></li><li><a href="#where" class="table-of-contents__link">WHERE</a><ul><li><a href="#regular-expressions" class="table-of-contents__link">Regular expressions</a></li></ul></li><li><a href="#return" class="table-of-contents__link">RETURN</a><ul><li><a href="#skip--limit" class="table-of-contents__link">SKIP &amp; LIMIT</a></li><li><a href="#order-by" class="table-of-contents__link">ORDER BY</a></li><li><a href="#aggregating" class="table-of-contents__link">Aggregating</a></li></ul></li><li><a href="#union-and-union-all" class="table-of-contents__link">UNION and UNION ALL</a></li><li><a href="#unwind" class="table-of-contents__link">UNWIND</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/memgraph/overview">Memgraph DB</a></li><li class="footer__item"><a class="footer__link-item" href="/memgraph-lab">Memgraph Lab</a></li><li class="footer__item"><a class="footer__link-item" href="/cypher-manual">Cypher manual</a></li><li class="footer__item"><a class="footer__link-item" href="/mage">MAGE</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/memgraphdb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discourse.memgraph.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Developer Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/memgraphdb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/memgraph" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCZ3HOJvHGxtQ_JHxOselBYg" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://memgraph.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/img/Memgraph-logo-white-rgb.png" alt="Memgraph Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/Memgraph-logo-white-rgb.png" alt="Memgraph Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2021 Memgraph. Built by developers, for developers!</div></div></div></footer></div>
<script src="/assets/js/runtime~main.29229d00.js"></script>
<script src="/assets/js/main.6ff5a3c8.js"></script>
</body>
</html>