(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{157:function(e,a,n){"use strict";n.r(a),n.d(a,"frontMatter",(function(){return l})),n.d(a,"metadata",(function(){return o})),n.d(a,"toc",(function(){return s})),n.d(a,"default",(function(){return c}));var t=n(3),r=n(7),i=(n(0),n(194)),l={id:"analyzing-ted-talks",title:"Analyzing TED Talks",sidebar_label:"Analyzing TED Talks"},o={unversionedId:"tutorials/analyzing-ted-talks",id:"tutorials/analyzing-ted-talks",isDocsHomePage:!1,title:"Analyzing TED Talks",description:"Analyzing TED Talks",source:"@site/docs/tutorials/analyzing-ted-talks.md",slug:"/tutorials/analyzing-ted-talks",permalink:"/memgraph/tutorials/analyzing-ted-talks",editUrl:"https://github.com/memgraph/docs/tree/main/docs/tutorials/analyzing-ted-talks.md",version:"current",sidebar_label:"Analyzing TED Talks",sidebar:"memgraph",previous:{title:"Tutorials overview",permalink:"/memgraph/tutorials/tutorials"},next:{title:"Backpacking through Europe",permalink:"/memgraph/tutorials/backpacking-through-europe"}},s=[{value:"Analyzing TED Talks",id:"analyzing-ted-talks",children:[{value:"Introduction",id:"introduction",children:[]},{value:"Data Model",id:"data-model",children:[]},{value:"Importing the Snapshot",id:"importing-the-snapshot",children:[]},{value:"Example Queries using OpenCypher",id:"example-queries-using-opencypher",children:[]}]}],p={toc:s};function c(e){var a=e.components,l=Object(r.a)(e,["components"]);return Object(i.a)("wrapper",Object(t.a)({},p,l,{components:a,mdxType:"MDXLayout"}),Object(i.a)("h2",{id:"analyzing-ted-talks"},"Analyzing TED Talks"),Object(i.a)("p",null,"This article is a part of a series intended to show how to use Memgraph\non real-world data to retrieve some interesting and useful\ninformation."),Object(i.a)("p",null,"We highly recommend checking out the other articles from this series which\nare listed in our ",Object(i.a)("a",{parentName:"p",href:"/memgraph/tutorials/tutorials"},"tutorial overview section"),"."),Object(i.a)("h3",{id:"introduction"},"Introduction"),Object(i.a)("p",null,Object(i.a)("a",{parentName:"p",href:"https://www.ted.com/"},"TED")," is a nonprofit organization devoted to spreading\nideas, usually in the form of short, powerful talks.\nToday, TED talks are influential videos from expert speakers on almost all\ntopics ","\u2014"," from science to business to global issues.\nHere we present a small dataset which consists of 97 talks, show how to model\nthis data as a graph and demonstrate a few example queries."),Object(i.a)("h3",{id:"data-model"},"Data Model"),Object(i.a)("ul",null,Object(i.a)("li",{parentName:"ul"},"Each TED talk has a main speaker, so we\nidentify two types of nodes ","\u2014"," ",Object(i.a)("inlineCode",{parentName:"li"},"Talk")," and ",Object(i.a)("inlineCode",{parentName:"li"},"Speaker"),". "),Object(i.a)("li",{parentName:"ul"},"We add an edge of type ",Object(i.a)("inlineCode",{parentName:"li"},"Gave")," pointing to a ",Object(i.a)("inlineCode",{parentName:"li"},"Talk")," from its main ",Object(i.a)("inlineCode",{parentName:"li"},"Speaker"),"."),Object(i.a)("li",{parentName:"ul"},"Each speaker has a name so we can add property ",Object(i.a)("inlineCode",{parentName:"li"},"name")," to ",Object(i.a)("inlineCode",{parentName:"li"},"Speaker")," node."),Object(i.a)("li",{parentName:"ul"},"We'll add properties ",Object(i.a)("inlineCode",{parentName:"li"},"name"),", ",Object(i.a)("inlineCode",{parentName:"li"},"title")," and ",Object(i.a)("inlineCode",{parentName:"li"},"description")," to node\n",Object(i.a)("inlineCode",{parentName:"li"},"Talk"),". "),Object(i.a)("li",{parentName:"ul"},"Each talk is given in a specific TED event, so we can\ncreate node ",Object(i.a)("inlineCode",{parentName:"li"},"Event")," with property ",Object(i.a)("inlineCode",{parentName:"li"},"name")," and relationship ",Object(i.a)("inlineCode",{parentName:"li"},"InEvent")," between\ntalk and event."),Object(i.a)("li",{parentName:"ul"},"Talks are tagged with keywords to facilitate searching, hence we\nadd node ",Object(i.a)("inlineCode",{parentName:"li"},"Tag")," with property ",Object(i.a)("inlineCode",{parentName:"li"},"name")," and relationship ",Object(i.a)("inlineCode",{parentName:"li"},"HasTag")," between talk and\ntag."),Object(i.a)("li",{parentName:"ul"},"Users give ratings to each talk by selecting up to three\npredefined string values. Therefore we add node ",Object(i.a)("inlineCode",{parentName:"li"},"Rating")," with these values as\nproperty ",Object(i.a)("inlineCode",{parentName:"li"},"name")," and relationship",Object(i.a)("inlineCode",{parentName:"li"},"HasRating")," with property ",Object(i.a)("inlineCode",{parentName:"li"},"user_count")," between\ntalk and rating nodes.")),Object(i.a)("p",null,Object(i.a)("img",{src:n(255).default})),Object(i.a)("h3",{id:"importing-the-snapshot"},"Importing the Snapshot"),Object(i.a)("p",null,"We have prepared a database snapshot for this example, so the user can easily\nimport it when starting Memgraph using the ",Object(i.a)("inlineCode",{parentName:"p"},"--data-directory")," option."),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-plaintext"},"sudo -u memgraph \\\n  /usr/lib/memgraph/memgraph --data-directory /usr/share/memgraph/examples/TEDTalk \\\n    --storage-snapshot-interval-sec=0 --storage-wal-enabled=false \\\n    --storage-snapshot-on-exit=false --storage-properties-on-edges=true\n")),Object(i.a)("p",null,"When using Memgraph installed from a Debian or RPM package,\nthe currently running Memgraph server needs to be stopped before\nimporting the example, using the following command:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-plaintext"},"systemctl stop memgraph\n")),Object(i.a)("p",null,"When using Docker, the example can simply be imported with the following command:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-plaintext"},"docker run -p 7687:7687 \\\n  -v mg_lib:/var/lib/memgraph -v mg_log:/var/log/memgraph -v mg_etc:/etc/memgraph \\\n  memgraph --data-directory /usr/share/memgraph/examples/TEDTalk \\\n  --storage-snapshot-interval-sec=0 --storage-wal-enabled=false \\\n  --storage-snapshot-on-exit=false --storage-properties-on-edges=true\n")),Object(i.a)("p",null,"The user should note that any modifications of the database state will persist\nonly during this run of Memgraph."),Object(i.a)("h3",{id:"example-queries-using-opencypher"},"Example Queries using OpenCypher"),Object(i.a)("p",null,"In the queries below, we are using ",Object(i.a)("a",{parentName:"p",href:"../../cypher-manual/overview"},"Cypher"),"\nto query Memgraph via the console."),Object(i.a)("p",null,"1) Find all talks given by specific speaker:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-cypher"},'MATCH (n:Speaker {name: "Hans Rosling"})-[:Gave]->(m:Talk)\nRETURN m.title;\n')),Object(i.a)("p",null,"2) Find the top 20 speakers with most talks given:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-cypher"},"MATCH (n:Speaker)-[:Gave]->(m)\nRETURN n.name, COUNT(m) AS TalksGiven\nORDER BY TalksGiven DESC LIMIT 20;\n")),Object(i.a)("p",null,"3) Find talks related by tag to specific talk and count them:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-cypher"},'MATCH (n:Talk {name: "Michael Green: Why we should build wooden skyscrapers"})\n      -[:HasTag]->(t:Tag)<-[:HasTag]-(m:Talk)\nWITH * ORDER BY m.name\nRETURN t.name, COLLECT(m.name), COUNT(m) AS TalksCount\nORDER BY TalksCount DESC;\n')),Object(i.a)("p",null,"4) Find 20 most frequently used tags:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-cypher"},"MATCH (t:Tag)<-[:HasTag]-(n:Talk)\nRETURN t.name AS Tag, COUNT(n) AS TalksCount\nORDER BY TalksCount DESC, Tag LIMIT 20;\n")),Object(i.a)("p",null,'5) Find 20 talks most rated as "Funny". If you want to query by other ratings,\npossible values are: Obnoxious, Jaw-dropping, OK, Persuasive, Beautiful,\nConfusing, Longwinded, Unconvincing, Fascinating, Ingenious, Courageous, Funny,\nInformative and Inspiring.'),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-cypher"},'MATCH (r:Rating{name:"Funny"})<-[e:HasRating]-(m:Talk)\nRETURN m.name, e.user_count ORDER BY e.user_count DESC LIMIT 20;\n')),Object(i.a)("p",null,"6) Find inspiring talks and their speakers from the field of technology:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-cypher"},'MATCH (n:Talk)-[:HasTag]->(m:Tag {name: "technology"})\nMATCH (n)-[r:HasRating]->(p:Rating {name: "Inspiring"})\nMATCH (n)<-[:Gave]-(s:Speaker)\nWHERE r.user_count > 1000\nRETURN n.title, s.name, r.user_count ORDER BY r.user_count DESC;\n')),Object(i.a)("p",null,"7) Now let's see one real-world example ","\u2014"," how to make a real-time\nrecommendation. If you've just watched a talk from a certain\nspeaker (e.g. Hans Rosling) you might be interested in finding more talks from\nthe same speaker on a similar topic:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-cypher"},'MATCH (n:Speaker {name: "Hans Rosling"})-[:Gave]->(m:Talk)\nMATCH (t:Talk {title: "New insights on poverty"})-[:HasTag]->(tag:Tag)<-[:HasTag]-(m)\nWITH * ORDER BY tag.name\nRETURN m.title as Title, COLLECT(tag.name), COUNT(tag) as TagCount\nORDER BY TagCount DESC, Title;\n')),Object(i.a)("p",null,"The following few queries are focused on extracting information about\nTED events."),Object(i.a)("p",null,"8) Find how many talks were given per event:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-cypher"},"MATCH (n:Event)<-[:InEvent]-(t:Talk)\nRETURN n.name as Event, COUNT(t) AS TalksCount\nORDER BY TalksCount DESC, Event\nLIMIT 20;\n")),Object(i.a)("p",null,"9) Find the most popular tags in the specific event:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-cypher"},'MATCH (n:Event {name:"TED2006"})<-[:InEvent]-(t:Talk)-[:HasTag]->(tag:Tag)\nRETURN tag.name as Tag, COUNT(t) AS TalksCount\nORDER BY TalksCount DESC, Tag\nLIMIT 20;\n')),Object(i.a)("p",null,"10) Discover which speakers participated in more than 2 events:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-cypher"},"MATCH (n:Speaker)-[:Gave]->(t:Talk)-[:InEvent]->(e:Event)\nWITH n, COUNT(e) AS EventsCount WHERE EventsCount > 2\nRETURN n.name as Speaker, EventsCount\nORDER BY EventsCount DESC, Speaker;\n")),Object(i.a)("p",null,"11) For each speaker search for other speakers that participated in same\nevents:"),Object(i.a)("pre",null,Object(i.a)("code",{parentName:"pre",className:"language-cypher"},"MATCH (n:Speaker)-[:Gave]->()-[:InEvent]->(e:Event)<-[:InEvent]-()<-[:Gave]-(m:Speaker)\nWHERE n.name != m.name\nWITH DISTINCT n, m ORDER BY m.name\nRETURN n.name AS Speaker, COLLECT(m.name) AS Others\nORDER BY Speaker;\n")))}c.isMDXComponent=!0},194:function(e,a,n){"use strict";n.d(a,"a",(function(){return d}));var t=n(0),r=n.n(t);function i(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function l(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?l(Object(n),!0).forEach((function(a){i(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),c=function(e){var a=r.a.useContext(p),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},m={inlineCode:"code",wrapper:function(e){var a=e.children;return r.a.createElement(r.a.Fragment,{},a)}},u=r.a.forwardRef((function(e,a){var n=e.components,t=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=t,g=u["".concat(l,".").concat(d)]||u[d]||m[d]||i;return n?r.a.createElement(g,o(o({ref:a},p),{},{components:n})):r.a.createElement(g,o({ref:a},p))}));function d(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var i=n.length,l=new Array(i);l[0]=u;var o={};for(var s in a)hasOwnProperty.call(a,s)&&(o[s]=a[s]);o.originalType=e,o.mdxType="string"==typeof e?e:t,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},255:function(e,a,n){"use strict";n.r(a),a.default=n.p+"assets/images/TED_metagraph-cfc7ffadb73736228f2e33e6b44133c2.png"}}]);