<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.5.1 plugin-docs plugin-id-memgraph docs-doc-id-tutorials/understanding-music-with-modules">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Exploring a music social network | Memgraph Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://memgraph.com/docs/memgraph/2.5.1/tutorials/understanding-music-with-modules"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:image" content="https://public-assets.memgraph.com/github-readme-images/docs.memgraph-browser.png"><meta data-rh="true" name="docusaurus_version" content="2.5.1"><meta data-rh="true" name="docusaurus_tag" content="docs-memgraph-2.5.1"><meta data-rh="true" name="docsearch:version" content="2.5.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-memgraph-2.5.1"><meta data-rh="true" property="og:title" content="Exploring a music social network | Memgraph Docs"><meta data-rh="true" name="description" content="This article is part of a series intended to show users how to use Memgraph on"><meta data-rh="true" property="og:description" content="This article is part of a series intended to show users how to use Memgraph on"><link data-rh="true" rel="icon" href="/docs/img/social-logo-round-corners.png"><link data-rh="true" rel="canonical" href="https://memgraph.com/docs/memgraph/2.5.1/tutorials/understanding-music-with-modules"><link data-rh="true" rel="alternate" href="https://memgraph.com/docs/memgraph/2.5.1/tutorials/understanding-music-with-modules" hreflang="en"><link data-rh="true" rel="alternate" href="https://memgraph.com/docs/memgraph/2.5.1/tutorials/understanding-music-with-modules" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://N801ZM9TWC-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Memgraph Docs" href="/docs/opensearch.xml">









<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Encode+Sans+Condensed:500,600">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400, 500,600">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="https://memgraph.com/docs/js/load-analytics.js"></script>
<script src="https://kit.fontawesome.com/3a9f2eb5b9.js"></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="b077599c-4584-4631-bbe1-aaafe35f8e68" data-project-name="Memgraph" data-project-color="#8C0081" data-project-logo="https://avatars.githubusercontent.com/u/17707542?s=200&amp;v=4" async></script><link rel="stylesheet" href="/docs/assets/css/styles.7efc6e46.css">
<link rel="preload" href="/docs/assets/js/runtime~main.26ef077d.js" as="script">
<link rel="preload" href="/docs/assets/js/main.f358b4e1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Check out the <a target="_blank" rel="noopener noreferrer" href="https://memgraph.com/benchgraph"><b>Graph Database Performance Benchmark</b></a> 🚀</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/memgraph-logo-500x380.png" alt="Memgraph Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/memgraph-logo-500x380.png" alt="Memgraph Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Docs</b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/memgraph/">Memgraph</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/memgraph">Getting started</a></li><li><a class="dropdown__link" href="/docs/memgraph/installation">Install Memgraph</a></li><li><a class="dropdown__link" href="/docs/memgraph/connect-to-memgraph">Connect to Memgraph</a></li><li><a class="dropdown__link" href="/docs/memgraph/import-data">Import data</a></li><li><a class="dropdown__link" href="/docs/memgraph/export-data">Export data</a></li><li><a class="dropdown__link" href="/docs/memgraph/tutorials">Tutorials</a></li><li><a class="dropdown__link" href="/docs/memgraph/how-to-guides">How-to guides</a></li><li><a class="dropdown__link" href="/docs/memgraph/reference-guide">Reference guide</a></li><li><a class="dropdown__link" href="/docs/memgraph/under-the-hood">Under the hood</a></li><li><a class="dropdown__link" href="/docs/memgraph/changelog">Changelog</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/memgraph-lab/">Memgraph Lab</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/memgraph-lab">Getting started</a></li><li><a class="dropdown__link" href="/docs/memgraph-lab/installation">Install Memgraph Lab</a></li><li><a class="dropdown__link" href="/docs/memgraph-lab/connect-to-memgraph">Connect to Memgraph</a></li><li><a class="dropdown__link" href="/docs/memgraph-lab/user-manual">User manual</a></li><li><a class="dropdown__link" href="/docs/memgraph-lab/graph-style-script-language">Graph Style Script language</a></li><li><a class="dropdown__link" href="/docs/memgraph-lab/changelog">Changelog</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/memgraph-cloud/">Memgraph Cloud</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/memgraph-cloud/">Getting started</a></li><li><a class="dropdown__link" href="/docs/memgraph-cloud/cloud-account">Cloud account</a></li><li><a class="dropdown__link" href="/docs/memgraph-cloud/cloud-projects">Cloud projects</a></li><li><a class="dropdown__link" href="/docs/memgraph-cloud/cloud-connect">Connect to Cloud</a></li><li><a class="dropdown__link" href="/docs/memgraph-cloud/payment">Payment</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/mage">MAGE</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/mage">Getting started</a></li><li><a class="dropdown__link" href="/docs/mage/installation">Install MAGE</a></li><li><a class="dropdown__link" href="/docs/mage/usage/calling-procedures">Using query modules</a></li><li><a class="dropdown__link" href="/docs/mage/query-modules/available-queries">Available query modules</a></li><li><a class="dropdown__link" href="/docs/mage/how-to-guides/create-a-new-module-python">How-to guides</a></li><li><a class="dropdown__link" href="/docs/mage/algorithms">Algorithms</a></li><li><a class="dropdown__link" href="/docs/mage/use-cases/bioinformatics">Use cases</a></li><li><a class="dropdown__link" href="/docs/mage/contributing">Contributing</a></li><li><a class="dropdown__link" href="/docs/mage/changelog">Changelog</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/gqlalchemy/">GQLAlchemy</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/gqlalchemy/">Getting started</a></li><li><a class="dropdown__link" href="/docs/gqlalchemy/installation">Installation</a></li><li><a class="dropdown__link" href="/docs/gqlalchemy/import-data">Import data</a></li><li><a class="dropdown__link" href="/docs/gqlalchemy/how-to-guides">How-to guides</a></li><li><a class="dropdown__link" href="/docs/gqlalchemy/reference">Reference</a></li><li><a class="dropdown__link" href="/docs/gqlalchemy/under-the-hood">Under the hood</a></li><li><a class="dropdown__link" href="/docs/gqlalchemy/changelog">Changelog</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/cypher-manual/">Cypher manual</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/cypher-manual/">Getting started</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/what-are-graph-databases">What are graph databases</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/cypher-query-language">Cypher query language</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/working-with-memgraph">Working with Memgraph</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/import-data">Import data</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/connecting-nodes">Connecting nodes</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/reading-existing-data">Reading existing data</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/updating-nodes-and-relationships">Updating nodes and relationships</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/deleting-nodes-and-relationships">Deleting nodes and relationships</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/clauses">Clauses</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/extension-clauses">Extension clauses</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/functions">Using functions</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/graph-algorithms">Graph algorithms</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/query-modules">Query modules</a></li><li><a class="dropdown__link" href="/docs/cypher-manual/other-features">Other features</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/help-center">Help</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/help-center/">Contact us</a></li><li><a class="dropdown__link" href="/docs/help-center/faq/memgraph">Memgraph FAQ</a></li><li><a class="dropdown__link" href="/docs/help-center/faq/cloud">Memgraph Cloud FAQ</a></li><li><a class="dropdown__link" href="/docs/help-center/faq/memgraph-lab">Memgraph Lab FAQ</a></li><li><a class="dropdown__link" href="/docs/help-center/faq/mage">MAGE FAQ</a></li><li><a class="dropdown__link" href="/docs/errors/">Errors overview</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/memgraph/2.5.1/">2.5.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/memgraph/next/tutorials/understanding-music-with-modules">Next version 🚧</a></li><li><a class="dropdown__link" href="/docs/memgraph/tutorials/understanding-music-with-modules">2.8.0</a></li><li><a class="dropdown__link" href="/docs/memgraph/2.7.0/tutorials/understanding-music-with-modules">2.7.0</a></li><li><a class="dropdown__link" href="/docs/memgraph/2.6.0/tutorials/understanding-music-with-modules">2.6.0</a></li><li><a class="dropdown__link" href="/docs/memgraph/2.5.2/tutorials/understanding-music-with-modules">2.5.2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/memgraph/2.5.1/tutorials/understanding-music-with-modules">2.5.1</a></li><li><a class="dropdown__link" href="/docs/memgraph/2.5.0/tutorials/understanding-music-with-modules">2.5.0</a></li><li><a href="https://memgraph-archive-docs.netlify.app/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Older versions 🗄️</a></li></ul></div><div class="navbar__item github-stars"><iframe src="https://ghbtns.com/github-btn.html?user=memgraph&repo=memgraph&type=star&count=true&size=large" frameborder="0" scrolling="0" title="Give Memgraph a Star on GitHub!"></iframe></div><a href="https://discord.gg/memgraph" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Memgraph Discord community"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/memgraph/2.5.1/">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/memgraph/2.5.1/installation">Install Memgraph</a><button aria-label="Toggle the collapsible sidebar category &#x27;Install Memgraph&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/memgraph/2.5.1/connect-to-memgraph">Connect to Memgraph</a><button aria-label="Toggle the collapsible sidebar category &#x27;Connect to Memgraph&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/memgraph/2.5.1/import-data">Import data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Import data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/memgraph/2.5.1/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/memgraph/2.5.1/tutorials/first-steps-with-memgraph">First steps with Memgraph</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/memgraph/2.5.1/tutorials/install-memgraph-windows-10">Install Memgraph on Windows 10</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/memgraph/2.5.1/tutorials/graph-modeling">Graph modeling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/memgraph/2.5.1/tutorials/migrate-relational-database">Migrate from RDBMS to Memgraph</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/memgraph/2.5.1/tutorials/exploring-datasets">Exploring datasets with graph analytics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Exploring datasets with graph analytics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/memgraph/2.5.1/tutorials/style-your-graphs-in-memgraph-lab">Style your graphs in Memgraph Lab</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/memgraph/2.5.1/tutorials/implement-custom-query-module-in-python">Implement a custom query module in Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/memgraph/2.5.1/tutorials/social-network-analysis">Social network analysis with NetworkX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/memgraph/2.5.1/tutorials/understanding-music-with-modules">Exploring a music social network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/memgraph/2.5.1/tutorials/graph-stream-processing-with-kafka">Graph stream processing with Kafka</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/memgraph/2.5.1/how-to-guides">How-to guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;How-to guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/memgraph/2.5.1/reference-guide">Reference guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/memgraph/2.5.1/under-the-hood">Under the hood</a><button aria-label="Toggle the collapsible sidebar category &#x27;Under the hood&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/memgraph/2.5.1/changelog">Changelog</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Memgraph Docs<!-- --> <b>2.5.1</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/memgraph/tutorials/understanding-music-with-modules">latest version</a></b> (<!-- -->2.8.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/memgraph/2.5.1/tutorials"><span itemprop="name">Tutorials</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Exploring a music social network</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.5.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Exploring a music social network</h1></header><p>This article is part of a series intended to show users how to use Memgraph on
real-world data and, by doing so, retrieve some interesting and useful
information.</p><p>We highly recommend checking out the other articles from this series which are
listed in our <a href="/docs/memgraph/2.5.1/tutorials">tutorial overview section</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>Getting useful information from your data is always challenging. With Memgraph,
you can manipulate and extract a huge amount of information by writing queries.
Memgraph even offers a set of built-in graph algorithms. You can use those
algorithms in your queries, extending your power over the data. But what if you
wanted to do more?</p><p>At its core, Memgraph &quot;simply&quot; builds a graph from your data. Graphs were always
interesting to scientists and engineers because of their interesting properties
allowing you to represent a specific kind of data in an intuitive way which
makes extracting useful information much easier. A field called graph theory
emerged in mathematics, producing a great number of algorithms, metrics, and
other functions that are applied to the graphs.</p><p>Memgraph allows you to use the underlying graph in your functions by using
<code>Query modules</code>, and those functions are called procedures. In this tutorial,
we&#x27;ll see how easy it is to extend the capabilities of Memgraph using Python. It
will also show you how to use one of the most popular Python libraries for
graphs, called <a href="https://networkx.github.io/" target="_blank" rel="noopener noreferrer">NetworkX</a>, which contains an insane
amount of functions and algorithms for the graphs.</p><p>To get started, sign up to <a href="https://memgraph.com/cloud" target="_blank" rel="noopener noreferrer">Memgraph Cloud</a>, create
a new instance and connect to it using in-browser Memgraph Lab. If you require
help, check out the <a href="/docs/memgraph-cloud">documentation on Memgraph Cloud</a>. </p><p>You can also install Memgraph using the <code>memgraph-platform</code> image by following
the <a href="/docs/memgraph/2.5.1/installation">installment instructions</a> for your OS. Once
Memgraph is up and running, connect to it using <strong>Memgraph Lab</strong>, a visual user
interface that you can also use from your browser at
<a href="http://localhost:3000" target="_blank" rel="noopener noreferrer"><code>http://localhost:3000</code></a> or <a href="https://memgraph.com/lab" target="_blank" rel="noopener noreferrer">download as an
application</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-model">Data model<a href="#data-model" class="hash-link" aria-label="Direct link to Data model" title="Direct link to Data model">​</a></h2><p>Social graphs is a relatively recent term. Simply said, it&#x27;s a representation of
a social network. Social networks appear in various sites, e.g., Youtube, which
is primarily a site for watching videos, can be classified as a social network.
For this tutorial, we&#x27;ll use data consisting of users of the music streaming
platform called <a href="https://www.deezer.com/" target="_blank" rel="noopener noreferrer">Deezer</a>.</p><img loading="lazy" src="data:image/png;base64,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" class="imgBorder img_ev3q"><p>The data consists of around 50k Deezer users from Croatia, but we prepared a
subset of the dataset only composed of 2k users. Each user is defined by id and
a list of genres he loved. The edges represent the mutual friendship between the
users. You can find a more detailed explanation of the dataset on the
<a href="https://github.com/benedekrozemberczki/datasets#deezer-social-networks" target="_blank" rel="noopener noreferrer">GitHub</a>
alongside many more similar datasets kindly provided by the same authors.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="importing-the-dataset">Importing the dataset<a href="#importing-the-dataset" class="hash-link" aria-label="Direct link to Importing the dataset" title="Direct link to Importing the dataset">​</a></h2><p>To import the dataset navigate to the <code>Datasets</code> tab in the sidebar. From there,
choose the dataset <code>Music genres social network</code> and continue with the tutorial.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-queries-and-procedures">Example queries and procedures<a href="#example-queries-and-procedures" class="hash-link" aria-label="Direct link to Example queries and procedures" title="Direct link to Example queries and procedures">​</a></h2><p>Memgraph comes with several built-in algorithms. This list is expanded by the
MAGE library, but if the algorithm you require is something completely
different, you can add it yourself as a <strong>query module</strong>.</p><p>Let&#x27;s create a custom query module!</p><p>Go to the <strong>Query Modules</strong> section in Memgraph Lab and click on the <em>+ New
Module</em> button. Give it a name, such as <em>deezer_example</em> and <em>Create</em> it. A new
query module will be created with example procedures. Feel free to erase them
and copy the following code into it that will define a procedure called
<code>genre_count</code>:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> mgp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">@mgp</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">read_proc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">genre_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ProcCtx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">genre</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> count</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">v </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> v </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">vertices </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> genre </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">properties</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;genres&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">genre</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> count</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Click <em>Save</em> and you should be able to see the procedure and its signature as
<em>Detected procedures &amp; transformations</em>. </p><p>We can notice multiple things:</p><ul><li>import of the <code>mgp</code> module which contains helper functions and types for
defining custom procedures</li><li><code>@mgp.read_proc</code> decorator which marks the function as a procedure</li><li>every argument is annotated with a type</li><li>result is defined as an object of <code>mgp.Record</code> which also has annotated types
of its members</li></ul><p>This example is probably not that interesting to you because we can get the same
result using the following query:</p><div class="language-cypher codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cypher codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">MATCH</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">WITH</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Pop&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">AS</span><span class="token plain"> genre</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> genre </span><span class="token keyword" style="font-style:italic">IN</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">genres</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">RETURN</span><span class="token plain"> genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let&#x27;s try something more interesting. The genres are listed in the order the
users have added them. If we assume that users picked the genres in order of
preference, let&#x27;s write a function that tells us in what percentage each genre
appears in top n places. Add the following code:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> collections </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> defaultdict</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">@mgp</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">read_proc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">in_top_n_percentage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ProcCtx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">genre</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                              percentage</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token builtin" style="color:rgb(130, 170, 255)">float</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                              size</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    genre_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> defaultdict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">lambda</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;total_count&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;in_top_n_count&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> v </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">vertices</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> index</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> genre </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">enumerate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">properties</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;genres&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            genre_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;total_count&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            genre_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;in_top_n_count&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> index </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> n</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> counts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        genre</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        percentage</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">counts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;in_top_n_count&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> counts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;total_count&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        size</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">counts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;total_count&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">get_record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        counts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        counts </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> genre_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">items</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Save and close</em> the window then move to the <em>Query Execution</em> section to use the
procedure.</p><p>Let&#x27;s see what we get:</p><div class="language-cypher codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cypher codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CALL</span><span class="token plain"> deezer_example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">in_top_n_percentage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">YIELD</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">WITH</span><span class="token plain"> genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> percentage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> size</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> size </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">RETURN</span><span class="token plain"> genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> percentage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> size</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">BY</span><span class="token plain"> percentage </span><span class="token keyword" style="font-style:italic">DESC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As said in the introduction, we want to use the power of the graphs to extract
some useful information from our data which would be otherwise impossible. Most
of those functions are complex and writing them from scratch would be tedious.
As every modern programmer, we&#x27;ll just use a package that has everything we need
and more. To be precise, we&#x27;ll be using <code>NetworkX</code> that has a huge amount of
utility functions and graph algorithms implemented.</p><p>To use <code>NetworkX</code> algorithms we need to transform our graph to a type <code>NetworkX</code>
recognizes. In our case, we need to use an undirected graph <code>networkX.Graph</code>. To
make our lives easier, let&#x27;s write a helper function that transforms Memgraph
graph to <code>networkX.Graph</code>.</p><p>Go back to the <em>Query Modules</em> section, find the <em>deezer_example</em> query module,
click on the arrow on the right to see its details, then edit it by adding the
following code:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> networkx </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> nx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> networkx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">algorithms </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> nxa</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> itertools</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_create_undirected_graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ProcCtx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> nx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    g </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> nx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> v </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">vertices</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">check_must_abort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">add_node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> v </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">vertices</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">check_must_abort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> e </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">out_edges</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">add_edge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_vertex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">to_vertex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> g</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now let&#x27;s get some information about the graph. As our data represents social
network we would like to know if it has <a href="https://tinyurl.com/y3angsdb" target="_blank" rel="noopener noreferrer">bridges</a>
and we would like to calculate the <a href="https://en.wikipedia.org/wiki/Clustering_coefficient" target="_blank" rel="noopener noreferrer">average
clustering</a>.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">@mgp</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">read_proc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">analyze_graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ProcCtx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        average_clustering</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token builtin" style="color:rgb(130, 170, 255)">float</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        has_bridges</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token builtin" style="color:rgb(130, 170, 255)">bool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    g </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> _create_undirected_graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        average_clustering</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">nxa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">average_clustering</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        has_bridges</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">nxa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">has_bridges</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Save and close</em> the window then move to the <em>Query Execution</em> section to use the
procedure:</p><div class="language-cypher codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cypher codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CALL</span><span class="token plain"> deezer_example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">analyze_graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">YIELD</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Another interesting property of a node in a graph is its
<a href="https://en.wikipedia.org/wiki/Centrality" target="_blank" rel="noopener noreferrer">centrality</a>. Centrality tells us how
important a node is for a graph. In our case, it would mean higher the
centrality, the more popular the user is. Let&#x27;s find out which user is the most
popular in our network and take a peek at his/her music taste. We will use the
<a href="https://en.wikipedia.org/wiki/Betweenness_centrality" target="_blank" rel="noopener noreferrer">betweenness centrality</a>.
Edit the query module by adding the following code: </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">@mgp</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">read_proc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">betweenness_centrality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ProcCtx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">node</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Vertex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                            centrality</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    g </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> _create_undirected_graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">node</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> centrality</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">centrality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            centrality </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> nxa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">centrality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">betweenness_centrality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">items</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now let&#x27;s take a look at the results:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CALL deezer_example.betweenness_centrality()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">YIELD *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN node.id, node.genres, centrality</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY centrality DESC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LIMIT 10;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Calculating betweenness centrality for each node can take some time to finish.
The issue of the slow <code>NetworkX</code> implementations is something Memgraph tackled
by implementing a custom betweenness centrality algorithm within the MAGE library. </p></div></div><p>For our last trick, let&#x27;s try to locate communities inside our network.
Communities are a set of nodes that are densely connected. The goal of the
community detection algorithms can be nicely described with the next
visualization: <img loading="lazy" src="/docs/assets/images/community_detection_visualization-a7bacfdf4a83c423a48a363ad86b4080.png" width="459" height="215" class="img_ev3q"></p><p>As for centrality, there are multiple algorithms for finding communities in a
graph. We will write a function that takes a method for calculating communities,
uses it to find the communities, and, optionally, calculates some metrics
specific to the graph partitioning so we can compare algorithms. To make things
more interesting, let&#x27;s find out which genre is the most popular in the
community and return the percentage which tells us how many of the users have
that genre on their list. In the end, music is something that connects us! Edit
the query module by adding the following code: </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_get_communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ProcCtx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        community_function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        calculate_quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">bool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    g </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> _create_undirected_graph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    communities </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">community_function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> calculate_quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        quality </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;coverage&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nxa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">coverage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;modularity&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nxa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">modularity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;performance&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nxa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">performance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        quality </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    communities </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token builtin" style="color:rgb(130, 170, 255)">list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> community </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_community_info</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        info </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;size&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        genre_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> defaultdict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">lambda</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> genre </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> itertools</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">chain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">properties</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;genres&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> user </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            genre_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">genre_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            mpg </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">max</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                genre_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">items</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                key</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token keyword" style="font-style:italic">lambda</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            info</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;most_popular_genre&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> mpg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            info</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;most_popular_genre_percentage&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> mpg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> info</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;size&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> info</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">communities</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">get_community_info</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                   </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> c </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> quality</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now that we have our function in place let&#x27;s test some algorithms. We will be
checking out community detection using <a href="https://networkx.github.io/documentation/latest/reference/algorithms/generated/networkx.algorithms.community.modularity_max.greedy_modularity_communities.html#networkx.algorithms.community.modularity_max.greedy_modularity_communities" target="_blank" rel="noopener noreferrer">greedy modularity maximization by
Clauset-Newman-Moore</a>
and <a href="https://networkx.github.io/documentation/latest/reference/algorithms/generated/networkx.algorithms.community.label_propagation.label_propagation_communities.html#networkx.algorithms.community.label_propagation.label_propagation_communities" target="_blank" rel="noopener noreferrer">label
propagation</a>. Edit the query module by adding the following code: </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">@mgp</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">read_proc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">greedy_modularity_communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ProcCtx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        calculate_quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">bool</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        communities</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token builtin" style="color:rgb(130, 170, 255)">list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        quality</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> _get_communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        nxa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">greedy_modularity_communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        calculate_quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">@mgp</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">read_proc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">label_propagation_communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ProcCtx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        calculate_quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">bool</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        communities</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token builtin" style="color:rgb(130, 170, 255)">list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        quality</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">mgp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> _get_communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        nxa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">label_propagation_communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        calculate_quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above snippet, we can notice an optional argument <code>calculate_quality</code> and
usage of the type <code>mgp.Map</code> which is provided by Memgraph.</p><p>Let&#x27;s see the results with:</p><div class="language-cypher codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cypher codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CALL</span><span class="token plain"> deezer_example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">greedy_modularity_communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">YIELD</span><span class="token plain"> communities</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">UNWIND</span><span class="token plain"> communities </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> community</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">WITH</span><span class="token plain"> community</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">size </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">RETURN</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">most_popular_genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">most_popular_genre_percentage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">size</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">BY</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">size </span><span class="token keyword" style="font-style:italic">DESC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and</p><div class="language-cypher codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cypher codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CALL</span><span class="token plain"> deezer_example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">label_propagation_communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">YIELD</span><span class="token plain"> communities</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">UNWIND</span><span class="token plain"> communities </span><span class="token keyword" style="font-style:italic">AS</span><span class="token plain"> community</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">WITH</span><span class="token plain"> community</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">size </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">RETURN</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">most_popular_genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">most_popular_genre_percentage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">size</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">BY</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">size </span><span class="token keyword" style="font-style:italic">DESC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Your results should look something like this:
<img loading="lazy" src="/docs/assets/images/community_genre_statistics-8206eba0df0c16990e5c2151af0f726e.png" width="881" height="546" class="img_ev3q"></p><p>Hmm, <code>Pop</code> sure is popular. Let&#x27;s ignore that genre in the code:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> genre </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> itertools</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">chain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">properties</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;genres&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> user </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> community</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> genre </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Pop&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        genre_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">genre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and call our procedures again for each algorithm. Well, people always liked to
dance!</p><p>We saw the biggest communities in our network using two different methods. It&#x27;s
hard to say which of the methods did better so let&#x27;s check a couple of metrics
by calling the same procedure with <code>calculate_quality</code> set to true:</p><div class="language-cypher codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cypher codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CALL</span><span class="token plain"> deezer_example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">greedy_modularity_communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">YIELD</span><span class="token plain"> communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> quality</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">RETURN</span><span class="token plain"> quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and</p><div class="language-cypher codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cypher codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CALL</span><span class="token plain"> deezer_example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">label_propagation_communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">YIELD</span><span class="token plain"> communities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> quality</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">RETURN</span><span class="token plain"> quality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>I think it should come as no surprise that an algorithm that maximizes
modularity has higher modularity...</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="optimized-networkx-integration">Optimized NetworkX integration<a href="#optimized-networkx-integration" class="hash-link" aria-label="Direct link to Optimized NetworkX integration" title="Direct link to Optimized NetworkX integration">​</a></h2><p>As noted before, we at Memgraph are aware of NetworkX&#x27;s potential but the
performance for some functions isn&#x27;t that good. We decided to tackle this
problem by writing a wrapper object for Memgraph&#x27;s graph and with smarter usage
of NetworkX algorithms. To make things even more convenient, we decided to
implement procedures that call NetworkX functions with our graphs, so you have
out-of-the-box access to the graph algorithms. NetworkX contains a huge amount
of functions, and writing procedures for all of them require insane effort, so
don&#x27;t blame us if some of the algorithms aren&#x27;t available. We are always open to
any feedback, so if you think that an implementation for an algorithm is needed,
we will surely take that into account.</p><p>To demonstrate performance improvement, we will calculate the betweenness
centrality again, this time by using Memgraph&#x27;s procedure.</p><p>To get access to the NetworkX procedures, start your Memgraph server without
modifying the query modules directory path. That way, the path will be set to
the default path, which contains <code>nxalg</code> module.</p><p>Now let&#x27;s call the procedure:</p><div class="language-cypher codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cypher codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CALL</span><span class="token plain"> nxalg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">betweenness_centrality</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">YIELD</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">RETURN</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">genres</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> betweenness</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">BY</span><span class="token plain"> betweenness </span><span class="token keyword" style="font-style:italic">DESC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should get the same results as with our previous procedure for the
betweenness centrality but in much less time.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="further-reading">Further reading<a href="#further-reading" class="hash-link" aria-label="Direct link to Further reading" title="Direct link to Further reading">​</a></h2><p>We encourage you to take a look at our <a href="/docs/memgraph/2.5.1/reference-guide/query-modules/implement-custom-query-modules/custom-query-module-example">How to
Implement Query
Modules</a> how-to guide.</p><p>This tutorial showed you how with a little effort you can extend your control
over the data. Using packages like <code>NetworkX</code> you get a huge amount of already
implemented graph algorithms while Memgraph allows you complete access to its
internal graph.</p><p>If you want to learn more about how to use Memgraph with NetworkX, check out the <a href="https://memgraph.com/memgraph-for-networkx?utm_source=networkx-guide&amp;utm_medium=referral&amp;utm_campaign=networkx_ppp&amp;utm_term=docs%2Btutorialmusic&amp;utm_content=resources" target="_blank" rel="noopener noreferrer"><strong>Memgraph for NetworkX developers resources</strong></a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/memgraph/docs/tree/master/memgraph_versioned_docs/version-2.5.1/tutorials/understanding-music-with-modules.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/memgraph/2.5.1/tutorials/social-network-analysis"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Social network analysis with NetworkX</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/memgraph/2.5.1/tutorials/graph-stream-processing-with-kafka"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Graph stream processing with Kafka</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#data-model" class="table-of-contents__link toc-highlight">Data model</a></li><li><a href="#importing-the-dataset" class="table-of-contents__link toc-highlight">Importing the dataset</a></li><li><a href="#example-queries-and-procedures" class="table-of-contents__link toc-highlight">Example queries and procedures</a></li><li><a href="#optimized-networkx-integration" class="table-of-contents__link toc-highlight">Optimized NetworkX integration</a></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further reading</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/memgraph">Memgraph</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/memgraph-lab">Memgraph Lab</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/memgraph-cloud">Memgraph Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cypher-manual">Cypher manual</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/mage">MAGE</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/gqlalchemy">GQLAlchemy</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/memgraph" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/memgraphdb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/memgraphdb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://memgraph.com/cloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">Memgraph Cloud<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://playground.memgraph.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Memgraph Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/memgraph/memgraph" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCZ3HOJvHGxtQ_JHxOselBYg" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://memgraph.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/docs/img/Memgraph-logo-white-rgb.png" alt="Memgraph Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="160" height="74"><img src="/docs/img/Memgraph-logo-white-rgb.png" alt="Memgraph Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="160" height="74"></a></div><div class="footer__copyright">Copyright © 2023 Memgraph. Built by developers, for developers!</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.26ef077d.js"></script>
<script src="/docs/assets/js/main.f358b4e1.js"></script>
</body>
</html>