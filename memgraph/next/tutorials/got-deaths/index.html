<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="search" type="application/opensearchdescription+xml" title="Memgraph Docs" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Encode+Sans+Condensed:500,600">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400, 500,600">
<script src="https://docs.memgraph.com/js/load-analytics.js"></script>
<script src="https://kit.fontawesome.com/3a9f2eb5b9.js"></script><title data-react-helmet="true">Game of Thrones deaths | Memgraph Docs</title><meta data-react-helmet="true" property="og:url" content="https://docs.memgraph.com/memgraph/next/tutorials/got-deaths"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-memgraph-current"><meta data-react-helmet="true" property="og:title" content="Game of Thrones deaths | Memgraph Docs"><meta data-react-helmet="true" name="description" content="This article is part of a series intended to show how to use Memgraph"><meta data-react-helmet="true" property="og:description" content="This article is part of a series intended to show how to use Memgraph"><link data-react-helmet="true" rel="shortcut icon" href="/img/social-logo-round-corners.png"><link data-react-helmet="true" rel="canonical" href="https://docs.memgraph.com/memgraph/next/tutorials/got-deaths"><link data-react-helmet="true" rel="alternate" href="https://docs.memgraph.com/memgraph/next/tutorials/got-deaths" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.memgraph.com/memgraph/next/tutorials/got-deaths" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.e0c227af.css">
<link rel="preload" href="/assets/js/runtime~main.623b5f2f.js" as="script">
<link rel="preload" href="/assets/js/main.80bbf3c0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/memgraph-logo-500x380.png" alt="Memgraph Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/memgraph-logo-500x380.png" alt="Memgraph Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Docs</b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/memgraph/overview">Memgraph DB</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/memgraph/getting-started">Getting started</a></li><li><a class="dropdown__link" href="/memgraph/installation">Installation</a></li><li><a class="dropdown__link" href="/memgraph/import-data">Import data</a></li><li><a class="dropdown__link" href="/memgraph/connect-to-memgraph">Connect to Memgraph</a></li><li><a class="dropdown__link" href="/memgraph/reference-guide">Reference guide</a></li></ul></div><a class="navbar__item navbar__link" href="/memgraph-lab/">Memgraph Lab</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__item navbar__link" href="/cypher-manual/">Cypher manual</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cypher-manual/">Overview</a></li><li><a class="dropdown__link" href="/cypher-manual/functions">Functions</a></li><li><a class="dropdown__link" href="/cypher-manual/clauses">Clauses</a></li><li><a class="dropdown__link" href="/cypher-manual/other-features">Other features</a></li><li><a class="dropdown__link" href="/cypher-manual/differences">Differences</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__item navbar__link" href="/mage">MAGE</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/mage">Overview</a></li><li><a class="dropdown__link" href="/mage/installation">Installation</a></li><li><a class="dropdown__link" href="/mage/usage/calling-procedures">Usage</a></li><li><a class="dropdown__link" href="/mage/contributing">Contributing</a></li><li><a class="dropdown__link" href="/mage/getting-help">Getting help</a></li></ul></div><a class="navbar__item navbar__link" href="/help-center">Help Center</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/memgraph/next/overview">Unreleased ðŸš§</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/memgraph/next/tutorials/got-deaths">Unreleased ðŸš§</a></li><li><a class="dropdown__link" href="/memgraph/tutorials/got-deaths">1.6.1</a></li><li><a class="dropdown__link" href="/memgraph/1.6.0/tutorials/got-deaths">1.6.0</a></li><li><a class="dropdown__link" href="/memgraph/1.5.0/tutorials/got-deaths">1.5.0</a></li><li><a class="dropdown__link" href="/memgraph/1.4.0/tutorials/got-deaths">1.4.0</a></li><li><a class="dropdown__link" href="/memgraph/1.3.0/tutorials/got-deaths">1.3.0</a></li></ul></div><a href="https://github.com/memgraph" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/memgraph/next/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/memgraph/next/getting-started">Getting started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Connect to Memgraph</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Import data</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/memgraph/next/tutorials">Tutorials overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/memgraph/next/tutorials/analyzing-ted-talks">Analyzing TED Talks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/memgraph/next/tutorials/backpacking-through-europe">Backpacking through Europe</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/memgraph/next/tutorials/exploring-the-european-road-network">Exploring the European road network</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/memgraph/next/tutorials/football-transfers">Football transfers</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/memgraph/next/tutorials/got-deaths">Game of Thrones deaths</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/memgraph/next/tutorials/graphing-the-premier-league">Graphing the Premier League</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/memgraph/next/tutorials/marvel-universe">Marvel Comic Universe social network</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/memgraph/next/tutorials/movie-recommendation">Movie recommendation system</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/memgraph/next/tutorials/social-network-analysis">Social network analysis with NetworkX</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/memgraph/next/tutorials/understanding-music-with-modules">Understanding music (with query modules)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Database functionalities</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference guide</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts</a></li><li class="menu__list-item"><a class="menu__link" href="/memgraph/next/changelog">Changelog</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Memgraph Docs <b>Unreleased ðŸš§</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/memgraph/tutorials/got-deaths">latest version</a></b> (1.6.1).</div></div><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: Unreleased ðŸš§</span><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Game of Thrones deaths</h1></header><p>This article is part of a series intended to show how to use Memgraph
on real-world data to retrieve some interesting and useful
information.</p><p>We highly recommend checking out the other articles from this series which
are listed in our <a href="/memgraph/next/tutorials">tutorial overview section</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p><strong>WARNING</strong> - this tutorial could contain Game of Thrones <strong><em>spoilers</em></strong>.</p><p>Game of Thrones is an American fantasy drama television series created by David Benioff and D. B. Weiss for HBO.
It is an adaptation of A Song of Ice and Fire, George R. R. Martin&#x27;s series of fantasy novels,  the first of which is
A Game of Thrones. The Game of Thrones world is full of interesting characters, locations, scenarios, unexpected deaths, and plot twists.</p><p>Even though the COVID-19 pandemic hit the entire world in 2020 and is now starting to become one of the worst
years in recent history, 2019 was also a huge disappointment to all Game of Thrones fans. According to user reactions, a seven-year
build-up resulted in a poorly written ending of the last season and ruined the ending of one of the most popular shows on the planet.
Nonetheless, if you want to know how many characters would have survived if Jon Snow had stayed dead, which House had the best Kill/Death Ratio,
or who was the biggest traitor in the show, you came to the right place!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="data-model"></a>Data model<a class="hash-link" href="#data-model" title="Direct link to heading">#</a></h2><p>Although the Game of Thrones TV show is based on a series of books, our graph database contains only characters from the
previously mentioned TV shows as the books are still not finished. This tutorial would not be possible without data analyst David
Murphy who shared his collection of on-screen deaths on <a href="https://data.world/datasaurusrex/game-of-thones-deaths" target="_blank" rel="noopener noreferrer">this link</a>. For more information, you can visit his <a href="https://datasaurus-rex.com/gallery/gotviz-mkiii" target="_blank" rel="noopener noreferrer">blogpost</a> with interactive analysis
on the show deaths. We won&#x27;t be working with kills and deaths that happened off-screen or were tied to the undead (wraiths).
The dataset we used was slightly modified, in which columns &quot;Episode Name&quot; and &quot;IMDb Rating&quot; were added.</p><p>The model consists of the following nodes:</p><ul><li>a <code>Character</code> node has a <code>name</code> attribute corresponding to the character&#x27;s name (e.g. <code>&quot;Jon Snow&quot;</code>)</li><li>an <code>Allegiance</code> node has a <code>name</code> attribute corresponding to the house name the character
is loyal to (e.g.  <code>&quot;House Stark&quot;</code>)</li><li>a <code>Death</code> node has an <code>order</code> attribute corresponding to the order in which the death happened
in the show (e.g. <code>602</code>)</li><li>an <code>Episode</code> node has a <code>number</code> attribute corresponding to the number of episodes (e.g. <code>10</code>),
<code>name</code> attribute corresponding to the name of the episode (e.g. <code>&quot;Mothers Mercy&quot;</code>) and <code>imdb_rating</code>
episode corresponding to the IMDB rating of the episode (e.g. &quot;9.1&quot;)</li><li>a <code>Season</code> node has a <code>number</code> attribute corresponding to the number of the season (e.g. <code>10</code>)</li><li>a <code>Location</code> node has a <code>name</code> attribute corresponding to the location&#x27;s name (e.g. <code>&quot;Castle Black&quot;</code>)</li></ul><p>Nodes are connected with the following edges:</p><ul><li><code>:KILLED</code> - connect two Character nodes and they have 2 attributes,
<code>method</code> which says how was the character killed (e.g. <code>&quot;Knife&quot;</code>) and <code>count</code> attribute representing a
number of how many of these characters were killed (e.g. if <code>&quot;Jon Snow&quot;</code> killed <code>10</code> <code>&quot;Lannister soldiers&quot;</code>
then on this edge <code>count</code> would be <code>10</code>)</li><li><code>:LOYAL_TO</code> - connects <code>Character</code> node with <code>Allegiance</code> node representing an allegiance the character is
loyal to</li><li><code>:VICTIM_IN</code> and <code>:KILLER_IN</code> - connects <code>Character</code> node with <code>Death</code> node in which death happened</li><li><code>:HAPPENED_IN</code> - connects node <code>Death</code> with <code>Episode</code>, <code>Season</code> and <code>Location</code> nodes representing details
of the death</li><li><code>:PART_OF</code> connects node <code>Episode</code> with <code>Season</code> node which episode is part of</li></ul><p><img alt="GOT deaths" src="/assets/images/got-deaths-2cd1417aa600d6825dca0b133357f27b.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="exploring-the-dataset"></a>Exploring the dataset<a class="hash-link" href="#exploring-the-dataset" title="Direct link to heading">#</a></h2><p>You have two options for exploring this dataset.
If you just want to take a look at the dataset and try out a few queries, open
<a href="https://playground.memgraph.com/" target="_blank" rel="noopener noreferrer">Memgraph Playground</a> and continue with
the tutorial there. Note that you will not be able to execute <code>write</code> operations.</p><p>On the other hand, if you would like to add changes to the dataset, download the
<a href="https://memgraph.com/product/lab" target="_blank" rel="noopener noreferrer">Memgraph Lab</a> desktop application and navigate
to the <code>Datasets</code> tab in the sidebar. From there, choose the dataset
<code>Game of Thrones deaths</code> and continue with the tutorial.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="example-queries-using-cypher"></a>Example queries using Cypher<a class="hash-link" href="#example-queries-using-cypher" title="Direct link to heading">#</a></h2><p>In the queries below, we are using <a href="/cypher-manual">Cypher</a>
to query Memgraph via the console.</p><p>Here are some queries you might find interesting:</p><p><strong>MINI-GAME</strong> - If you have watched the TV Show, try to guess each result before executing the query!
1) Let&#x27;s start with a couple of simple queries. List the locations where most deaths occurred.
Can you guess which one is it?</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (l:Location)&lt;-[:HAPPENED_IN]-(d:Death)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN l.name AS location_name, count(d) AS death_count</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY death_count DESC;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>2) Now that we have the location with the most deaths, let&#x27;s list the episodes with the most deaths
as well.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (d:Death)-[:HAPPENED_IN]-&gt;(e:Episode)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN e.name AS episode_name, count(d) AS kill_count</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY kill_count DESC;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>3) List the number of kills per season. If you have watched the show, you should be able to guess this one.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (d:Death)-[:HAPPENED_IN]-&gt;(s:Season)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN s.number AS season_number, count(d) AS death_count</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY season_number ASC;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>4) The most poorly rated season by far was the last one, but can you guess the best one?
Let&#x27;s list the seasons by IMDB ratings. The problem we get with using the <code>avg()</code> function is that it
gives us too many decimals, therefore a useful solution is given in this example using <code>round()</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (e:Episode)-[:PART_OF]-&gt;(s:Season)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN s.number AS season_name, round(100 * avg(e.imdb_rating))/100 AS rating</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY rating DESC;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>5) There are many methods by which characters were killed such as sword or Dragonfire, but let&#x27;s list victims
of unique methods.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (:Character)-[k:KILLED]-&gt;(:Character)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WITH k.method AS kill_method, count(k.method) AS method_count</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WHERE method_count &lt; 2</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (killer:Character)-[k:KILLED]-&gt;(victim:Character)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WHERE k.method = kill_method</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN kill_method, victim.name AS victim;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>6) Daenerys Stormborn of House Targaryen, the First of Her Name, Queen of the Andals and the First Men,
Protector of the Seven Kingdoms, the Mother of Dragons, the Khaleesi of the Great Grass Sea, the Unburnt,
the Breaker of Chains or shortened to &quot;Daenerys Targaryen&quot; in our database is the biggest killer on
the show. Let&#x27;s list all the episodes she killed in as well as characters she killed.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (daenerys:Character {name: &#x27;Daenerys Targaryen&#x27;})-[:KILLED]-&gt;(victim:Character)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (daenerys)-[:KILLER_IN]-&gt;(d:Death)&lt;-[:VICTIM_IN]-(victim)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (d)-[:HAPPENED_IN]-(e:Episode)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN DISTINCT victim.name AS victim, count(d) AS kill_count, e.name AS episode_name</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY kill_count DESC;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>7) Houses or allegiances are one of the main aspects of Westeros. Some houses killed more characters
than others, but that doesn&#x27;t matter in the end, what matters is efficiency. Let&#x27;s list the allegiances with
the best Kill/Death Ratios or KDR for short. Here we came across one additional problem. If an allegiance had more
deaths than kills, the KDR would be 0. This can easily be fixed with the <code>toFloat()</code> function.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (:Character)-[death:KILLED]-&gt;(:Character)-[:LOYAL_TO]-&gt;(a:Allegiance)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WITH a, sum(death.count) AS deaths</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (:Character)&lt;-[kill:KILLED]-(:Character)-[:LOYAL_TO]-&gt;(a)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN a.name AS allegiance_name,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       sum(kill.count) AS kills,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       deaths,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       round(100 *(tofloat(sum(kill.count))/deaths))/100 AS KDR</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY KDR DESC;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>8) One of the best-rated episodes, Battle of the Bastards, showed us a fight between two houses: Stark and Bolton.
Let&#x27;s see which one had more casualties.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (c:Character)-[:LOYAL_TO]-&gt;(a:Allegiance)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (c)-[:VICTIM_IN]-(d:Death)-[:HAPPENED_IN]-(:Episode {name: &#x27;Battle of the Bastards&#x27;})</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN a.name AS house_name, count(d) AS death_count</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY death_count DESC</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LIMIT 2;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>9) One of the biggest features of Memgraph is drawing the graphs of queries we execute. Let&#x27;s visualize all the
Loyalties with Characters. Execute the following query and head out to the <code>GRAPH</code> tab.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (character:Character)-[loyal_to:LOYAL_TO]-(allegiance)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN character, loyal_to, allegiance;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>10) Remember that shocking last episode of the fifth season when they killed Jon Snow and we totally thought
he was gonna stay dead? Well, let&#x27;s list all the characters that would survive if he actually stayed dead.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (jon:Character {name: &#x27;Jon Snow&#x27;})-[:KILLED]-&gt;(victim:Character)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (jon)-[:VICTIM_IN]-&gt;(jon_death:Death)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (jon)-[:KILLER_IN]-&gt;(victim_death:Death)&lt;-[:VICTIM_IN]-(victim)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WHERE victim_death.order &gt; jon_death.order</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN DISTINCT victim.name AS victim, count(victim_death) AS kill_count</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY kill_count DESC;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>11) If we want to see the above example in graph form, we have to add some modifications to
the query, such as saving paths to variables that could be then written in <code>RETURN</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (jon:Character {name: &#x27;Jon Snow&#x27;})-[:KILLED]-&gt;(victim:Character)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (jon)-[:VICTIM_IN]-&gt;(jon_death:Death)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (jon)-[killed:KILLER_IN]-&gt;(victim_death:Death)&lt;-[died:VICTIM_IN]-(victim)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WHERE victim_death.order &gt; jon_death.order</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN jon, killed, victim_death, died, victim;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>12) Let&#x27;s see how it looks like if we want to visualize all of Jon Snow kills with their locations.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (jon:Character {name: &#x27;Jon Snow&#x27;})-[:KILLED]-&gt;(victim:Character)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (jon)-[:KILLER_IN]-&gt;(death:Death)&lt;-[victim_to_death:VICTIM_IN]-(victim)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (death)-[death_to_location:HAPPENED_IN]-&gt;(location:Location)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN victim, victim_to_death, death, death_to_location, location</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>13) Who do you think was the biggest traitor in terms of killing in its own allegiance? Well, let&#x27;s check it out!</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (killer:Character)-[:KILLED]-&gt;(victim:Character)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (killer)-[:LOYAL_TO]-&gt;(a:Allegiance)&lt;-[:LOYAL_TO]-(victim)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN killer.name AS traitor, count(victim) AS kill_count</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY kill_count DESC;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>14) To visualize the last example, we have to add paths between nodes in the result.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (killer:Character)-[killed:KILLED]-&gt;(victim:Character)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH (killer)-[:LOYAL_TO]-&gt;(allegiance:Allegiance)&lt;-[loyal_to:LOYAL_TO]-(victim)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN killer, killed, victim, loyal_to, allegiance;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>15) Memgraph supports graph algorithms as well. Let&#x27;s use Dijkstra&#x27;s shortest path algorithm to show the most
gruesome path of kills. An example kill path is: <code>Jon Snow</code> killed <code>5</code> <code>Lannister Soldiers</code> and they killed
<code>10</code> <code>Stark soldiers</code> with total <code>kill_count</code> of <code>15</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cypher"><pre tabindex="0" class="prism-code language-cypher codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MATCH p = (:Character)-[:KILLED * wShortest (e,v | e.count) kill_count]-&gt;(:Character)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RETURN nodes(p) AS kill_list, kill_count</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY kill_count DESC</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LIMIT 1;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To learn more about these algorithms, we suggest you check out their Wikipedia
pages:</p><ul><li><a href="https://en.wikipedia.org/wiki/Breadth-first_search" target="_blank" rel="noopener noreferrer">Breadth-first search</a></li><li><a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" target="_blank" rel="noopener noreferrer">Dijkstra&#x27;s algorithm</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/memgraph/docs/tree/master/docs/tutorials/got-deaths.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/memgraph/next/tutorials/football-transfers"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Football transfers</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/memgraph/next/tutorials/graphing-the-premier-league"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Graphing the Premier League Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#data-model" class="table-of-contents__link">Data model</a></li><li><a href="#exploring-the-dataset" class="table-of-contents__link">Exploring the dataset</a></li><li><a href="#example-queries-using-cypher" class="table-of-contents__link">Example queries using Cypher</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/memgraph/overview">Memgraph DB</a></li><li class="footer__item"><a class="footer__link-item" href="/memgraph-lab">Memgraph Lab</a></li><li class="footer__item"><a class="footer__link-item" href="/cypher-manual">Cypher manual</a></li><li class="footer__item"><a class="footer__link-item" href="/mage">MAGE</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/memgraphdb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discourse.memgraph.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Developer Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/memgraphdb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/memgraph" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCZ3HOJvHGxtQ_JHxOselBYg" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://memgraph.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/img/Memgraph-logo-white-rgb.png" alt="Memgraph Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/Memgraph-logo-white-rgb.png" alt="Memgraph Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2021 Memgraph. Built by developers, for developers!</div></div></div></footer></div>
<script src="/assets/js/runtime~main.623b5f2f.js"></script>
<script src="/assets/js/main.80bbf3c0.js"></script>
</body>
</html>